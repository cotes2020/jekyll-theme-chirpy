---
title: [Langchain Study | 2-2. í™˜ê²½êµ¬ì¶• - ë¡œì»¬ í™˜ê²½ êµ¬ì¶•]
categories: [AI, Langchain]
tags: [Langchain, AI, AI Application]		
---


Langchainì˜ ê° ëª¨ë“ˆë“¤ì— ëŒ€í•´ ìì„¸í•˜ê²Œ ë°°ìš°ê¸°ì— ì•ì„œ ë¡œì»¬ì— í™˜ê²½êµ¬ì„± í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì†Œê°œí•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ë­ì²´ì¸ì€ íŒŒì´ì¬ìœ¼ë¡œ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— Pycharm, vscode, jupyter notebook ë“± ë‹¤ì–‘í•œ IDEì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì— í¸í•˜ê²Œ ì“°ì‹œë˜ IDEê°€ ìˆë‹¤ë©´ í•´ë‹¹ IDEë¥¼ ì‚¬ìš©í•˜ì…”ë„ ë¬´ë°©í•©ë‹ˆë‹¤.

ì´ë²ˆ ê¸€ì—ì„œëŠ” ë¹„ì£¼ì–¼ ìŠ¤íŠœë””ì˜¤ ì½”ë“œ(ì´í•˜ vscode)ë¥¼ ì´ìš©í•œ ë¡œì»¬ í™˜ê²½ êµ¬ì„±ë°©ë²•ì— ëŒ€í•´ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤. 

ì„¤ì¹˜ ëŒ€ìƒ ì¤‘ ê¸°ì¡´ì— ì„¤ì¹˜ë˜ì–´ ìˆë‹¤ë©´ ìƒëµí•˜ì‹œë©´ ë©ë‹ˆë‹¤.

### 1. íŒŒì´ì¬ ì‹¤í–‰í™˜ê²½ êµ¬ì¶•

#### íŒŒì´ì¬ ì„¤ì¹˜

**python3.11** ë²„ì „ì„ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.
- https://www.python.org/downloads/release/python-3110/
- `Windows installer (64-bit) version`
- í™˜ê²½ë³€ìˆ˜ `PATH` ì„¤ì • ì²´í¬!

**<mark>âš ï¸ ë°˜ë“œì‹œ python 3.11ì¸ì§€ í™•ì¸! 3.12ì€ í˜¸í™˜ ë¶ˆê°€!</mark>**

ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ í„°ë¯¸ë„ì—ì„œ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ë²„ì „ì´ í‘œì‹œë˜ë©´ ì„¤ì¹˜ ì™„ë£Œëœ ê²ƒì´ë‹¤.

```bash
python --version
```

#### vscode ì„¤ì¹˜

- vscode download link
  
  - [Download Visual Studio Code - Mac, Linux, Windows](https://code.visualstudio.com/download)

#### vscode Extension ì¶”ì²œ

- Python
  - vscodeì—ì„œ ê°€ìƒí™˜ê²½ ì„ íƒ ë‹¨ì¶• ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

- pylance
  
  - ì„¤ì¹˜ í›„, í†±ë‹ˆë°”í€´ë¥¼ í†µí•´ `Extension setting(í™•ì¥ ì„¤ì •)`ì—ì„œ `Auto Import Completions`ë¥¼ ì²´í¬í•´ì„œ í™œì„±í™”í•œë‹¤.

### 2. OpenAI API í‚¤ ë°œê¸‰ ë° í™˜ê²½ë³€ìˆ˜ ì„¤ì •

#### OpenAI API í‚¤ ë°œê¸‰

- [Langchain ì‹¤ìŠµìš© OpenAI API í‚¤ ìš”ì²­](https://git.bwg.co.kr/gitlab/study/langchain/-/issues/16) í˜ì´ì§€ë¥¼ í†µí•´ ìš”ì²­í•˜ì‹œë©´, ê°œë³„ ì—°ë½ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

#### í™˜ê²½ë³€ìˆ˜ì— API í‚¤ ì„¤ì •í•˜ê¸°

1. [Windows ì„¤ì •] - [ì‹œìŠ¤í…œ] - [ì •ë³´] - [ê³ ê¸‰ ì‹œìŠ¤í…œ ì„¤ì •] - [ê³ ê¸‰] - [í™˜ê²½ ë³€ìˆ˜] ë¥¼ í†µí•´ í™˜ê²½ë³€ìˆ˜ ì ‘ê·¼

2. [ì‚¬ìš©ìë³€ìˆ˜]ì— í™˜ê²½ë³€ìˆ˜ ë“±ë¡
   
   - ë³€ìˆ˜ëª…: OPENAI_API_KEY
   
   - ê°’: ì „ë‹¬ë°›ì€ openAI API key

3. ë“±ë¡ í›„, powershellì—ì„œ ì•„ë˜ì˜ ëª…ë ¹ì–´ ì‘ì„± í›„ ì…ë ¥í•œ ê°’ì´ ì¶œë ¥ë˜ë©´ ë“±ë¡ ì™„ë£Œ
   
   ```bash
    echo $env:OPENAI_API_KEY
   ```

### 3. ë­ì²´ì¸ê³¼ í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤€ë¹„

ë­ì²´ì¸ì˜ ë²„ì „ì— ë”°ë¼ ì†ŒìŠ¤ì½”ë“œê°€ ìì£¼ ë°”ë€ŒëŠ” í¸ì´ë¯€ë¡œ, ì§€ì •ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë²„ì „ì„ í†µì¼í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— í•„ìš”í•œ ëŒ€ìƒ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë²„ì „ì´ ì§€ì •ëœ í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

#### ë¼ì´ë¸ŒëŸ¬ë¦¬ í…ìŠ¤íŠ¸ íŒŒì¼ ë‹¤ìš´ë¡œë“œ

[ğŸ“requirements.txt]({{ "/assets/files/requirements.txt" | relative_url }}) ë‹¤ìš´ë¡œë“œ

> ì†ŒìŠ¤ì½”ë“œëŠ” gitlabì˜ studyê·¸ë£¹ì˜ [LangChain í”„ë¡œì íŠ¸ì˜ ë ˆíŒŒì§€í† ë¦¬](https://git.bwg.co.kr/gitlab/study/langchain)ë¥¼ í´ë¡ í•˜ì—¬ ì‚¬ìš©í•˜ì—¬ë„ ë©ë‹ˆë‹¤.(*í•´ë‹¹ ë ˆíŒŒì§€í† ë¦¬ì˜ ì¼ë¶€ ì†ŒìŠ¤ë¥¼ ê¸€ì—ì„œ ë‹¤ë£° ì˜ˆì •ì…ë‹ˆë‹¤.)
> 
> - ë¼ì´ë¸ŒëŸ¬ë¦¬ í…ìŠ¤íŠ¸ íŒŒì¼ ê²½ë¡œ: https://git.bwg.co.kr/gitlab/study/langchain/-/blob/main/02_%EB%9E%AD%EC%B2%B4%EC%9D%B8-%EC%99%84%EB%B2%BD%EC%9E%85%EB%AC%B8/requirements.txt

### ê°€ìƒí™˜ê²½ êµ¬ì„±

1. ì‘ì—… í´ë” ìƒì„±í•˜ì—¬ vscodeë¡œ ì—´ê¸°

2. python ë²„ì „ í™•ì¸ (**<mark>ë°˜ë“œì‹œ python 3.11ì¸ì§€ í™•ì¸! 3.12ì€ í˜¸í™˜ ë¶ˆê°€!</mark>**)
   
   ```bash
   python --version
   ```

3. vscode terminalì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ê°€ìƒí™˜ê²½ ìƒì„± (ê°€ìƒí™˜ê²½ì´ë¦„ì€ `.venv`ë¡œ ê¶Œì¥)
   
   ```shell
   python -m venv {ê°€ìƒí™˜ê²½ì´ë¦„}
   ```

4. ì¸í„°í”„ë¦¬í„° ì„¤ì •
   
   - vscodeì—ì„œ ì„¤ì • (ì•ˆë  ê²½ìš° cmd ë¡œ ìˆ˜í–‰)
     
     - vscodeì—ì„œ Ctrl+Shift+Pë¥¼ ëˆ„ë¥´ë©´ í™”ë©´ ìƒë‹¨ì— ì°½ì´ í•˜ë‚˜ ìƒê¸°ëŠ” ë°, ê±°ê¸°ì— **Python Select Interpreter**ë¥¼ ì…ë ¥í•´ì„œ ì„ íƒ
     
     - ìƒì„±í•œ ê°€ìƒí™˜ê²½ ì„ íƒ
       
       ![]({{"/assets/img/posts/2024-05-30-17-52-11-image.png"  | relative_url }})
   
   - cmdì—ì„œ í™œì„±í™”
     - <mark>ë°˜ë“œì‹œ `command prompt`ë¡œ ìˆ˜í–‰! (powershellì—ì„œ ìˆ˜í–‰ ì‹œ ì ìš©X)</mark>
   ![image]({{"/assets/img/posts/image.png"  | relative_url }})
     - ìƒì„±í•œ ê°€ìƒí™˜ê²½ì˜ ê²½ë¡œì—ì„œ `activate.bat` ìˆ˜í–‰
     
     ```commandline
     {ê°€ìƒí™˜ê²½ëª…}\Scripts\activate.bat
     ```

5. ì ìš© í™•ì¸

- vscodeì—ì„œ cmdì°½ ì—´ì—ˆì„ ë•Œ, ì•„ë˜ì™€ ê°™ì´ ëª…ë ¹ì°½ ì•ì— (`{ê°€ìƒí™˜ê²½ëª…}`)ëœ¨ëŠ”ì§€ í™•ì¸
  
  ![]({{"/assets/img/posts/2024-05-30-16-46-24-image.png"  | relative_url }})

#### ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œ

vscodeì—ì„œ `requirement.txt` íŒŒì¼ì´ ìˆëŠ” ê²½ë¡œë¡œ ì´ë™í•˜ì—¬, **ê°€ìƒí™˜ê²½ì´ í™œì„±í™”ëœ cmd í„°ë¯¸ë„**ì—ì„œ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

- **ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜**
  
  ```bash
  pip install -r requirements.txt
  ```

### 4. ì‘ë™ í™•ì¸

0. `openai` ëª¨ë“ˆì„ ì„¤ì¹˜í•´ì£¼ì„¸ìš”. 
```commandline
pip install openai==0.27.8
```
1. ì•„ë˜ì˜ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.
   
    **sample.py**
   
   ```python
   import json
   import openai  #â† OpenAIì—ì„œ ì œê³µí•˜ëŠ” Python íŒ¨í‚¤ì§€ ê°€ì ¸ì˜¤ê¸°
   
   response = openai.ChatCompletion.create(  #â†OpenAI APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì–¸ì–´ ëª¨ë¸ì„ í˜¸ì¶œí•©ë‹ˆë‹¤.
       model="gpt-3.5-turbo",  #â† í˜¸ì¶œí•  ì–¸ì–´ ëª¨ë¸ì˜ ì´ë¦„
       messages=[
           {
               "role": "user",
               "content": "iPhone8 ì¶œì‹œì¼ì„ ì•Œë ¤ì£¼ì„¸ìš”"  #â†ì…ë ¥í•  ë¬¸ì¥(í”„ë¡¬í”„íŠ¸)
           },
       ]
   )
   
   print(json.dumps(response, indent=2, ensure_ascii=False))
   ```

2. ì•„ë˜ì™€ ê°™ì€ ì¶œë ¥ì´ ë‚˜ì˜¨ë‹¤ë©´ ì •ìƒì ìœ¼ë¡œ í™˜ê²½êµ¬ì„±ì´ ì™„ë£Œëœ ê²ƒì…ë‹ˆë‹¤!

![]({{"/assets/img/posts/2024-05-30-18-10-50-image.png"  | relative_url }})


## Version up

sample ì½”ë“œëŠ” openai 1.0.0 ì´ìƒì˜ ë²„ì „ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•Šì•„ìš”, 
1.0.0 ì´ìƒì—ì„œ ë™ì‘í•˜ëŠ” ì†ŒìŠ¤ëŠ” ë‹¤ìŒì²˜ëŸ¼ `ChatCompletion` ëŒ€ì‹  `chat.completions`ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. 

```python 
import os
import json
from openai import OpenAI

client = OpenAI(
    # This is the default and can be omitted
    api_key=os.environ.get("OPENAI_API_KEY"),
)

chat_completion = client.chat.completions.create(
    messages=[
        {
            "role": "user",
            "content": "iPhone8 ì¶œì‹œì¼ì„ ì•Œë ¤ì£¼ì„¸ìš”",
        }
    ],
    model="gpt-3.5-turbo",
)

print(json.dumps(chat_completion.choices[0].message.content, indent=2, ensure_ascii=False))
```