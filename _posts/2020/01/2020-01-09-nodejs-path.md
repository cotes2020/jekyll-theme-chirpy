---
title: "Node.js pathæ¨¡å—ï¼šæ–‡ä»¶è·¯å¾„"
url: "2020-01-09-nodejs-path"
date: 2020-01-09
---

## æ¦‚è¿°


è¯»äº† `path` æ¨¡å—çš„æ–‡æ¡£ï¼Œç ”ç©¶äº†å‡ ä¸ªæœ‰æ„æ€çš„é—®é¢˜ï¼š

- ğŸ¤”ï¸ è·¯å¾„ç‰‡æ®µåˆ†éš”ç¬¦ vs è·¯å¾„å®šç•Œç¬¦
- ğŸ¤”ï¸ `path.join()` vs `path.resolve()`
- ğŸ¤”ï¸ Windows vs Posix

## è·¯å¾„ç‰‡æ®µåˆ†éš”ç¬¦ vs è·¯å¾„å®šç•Œç¬¦


`path.sep`ï¼Œæ˜¯è·¯å¾„ç‰‡æ®µåˆ†éš”ç¬¦ã€‚å®ƒåœ¨ Windows ä¸Šæ˜¯`\`ï¼Œåœ¨ Unix ä¸Šæ˜¯`/`ã€‚å®ƒç”¨äºæŒ‡å®šæ–‡ä»¶(å¤¹)çš„è·¯å¾„ä¸­ã€‚


`path.delimiter`ï¼Œæ˜¯è·¯å¾„å®šç•Œç¬¦ã€‚å®ƒåœ¨ Windows ä¸Šæ˜¯ `;`ï¼Œåœ¨ Unix ä¸Šæ˜¯`:`ã€‚å®ƒç”¨äºåˆ†å‰²å¤šä¸ªè·¯å¾„ã€‚å› ä¸ºåœ¨ç³»ç»Ÿå˜é‡é‡Œï¼Œå¤šä¸ªè·¯å¾„æ˜¯è¢«æ‹¼æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å­˜å‚¨ï¼ˆä¸æ˜¯æ•°ç»„é›†åˆï¼‰ã€‚


ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è·å–æ‰€æœ‰å¯æ‰§è¡Œç¨‹åºçš„æœç´¢è·¯å¾„ï¼Œä»£ç å¦‚ä¸‹:


```typescript
const path = require("path");
/**
 * @return {string[]}
 */
function getAllPaths() {
    const paths = process.env.PATH.split(path.delimiter);
    return paths;
}
```


## `path.join()` vs `path.resolve()`


ä¸¤è€…çš„**ç›¸åŒç‚¹**æ˜¯ï¼šéƒ½ä¼šä½¿ç”¨ç³»ç»Ÿçš„åˆ†éš”ç¬¦å°†â€œè·¯å¾„ç‰‡æ®µâ€è¿›è¡Œæ‹¼æ¥ã€‚


ä¸¤è€…çš„**ä¸åŒç‚¹**åœ¨äºï¼š`path.join()`åªæ˜¯æ‹¼æ¥è·¯å¾„ï¼Œ**`path.resolve()`******** ä¼šå°†æ‹¼æ¥å¥½çš„è·¯å¾„è½¬æ¢æˆç»å¯¹è·¯å¾„**ã€‚


```typescript
const path = require("path");
console.log("å·¥ä½œç›®å½•æ˜¯ï¼š", process.cwd());
console.log("å½“å‰å·¥ä½œç›®å½•ä¸‹çš„tmp.jsè·¯å¾„", path.join(".", "tmp.js"));
console.log("å½“å‰å·¥ä½œç›®å½•ä¸‹çš„tmp.jsç»å¯¹è·¯å¾„", path.resolve(".", "tmp.js"));
```


ä¸Šé¢è¿™æ®µä»£ç çš„çš„ç»“æœæ˜¯ï¼š


```shell
å·¥ä½œç›®å½•æ˜¯ï¼š /Users/yuanxindong/Desktop/articles/xxoo521
å½“å‰å·¥ä½œç›®å½•ä¸‹çš„tmp.jsè·¯å¾„ tmp.js
å½“å‰å·¥ä½œç›®å½•ä¸‹çš„tmp.jsç»å¯¹è·¯å¾„ /Users/yuanxindong/Desktop/articles/xxoo521/tmp.js
```


## Windows vs Posix


POSIX: Portable Operating System Interfaceï¼Œå¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£ã€‚æ˜¯ IEEE ä¸ºè¦åœ¨å„ç§ UNIX æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œè½¯ä»¶ï¼Œè€Œå®šä¹‰ API çš„ä¸€ç³»åˆ—äº’ç›¸å…³è”çš„æ ‡å‡†çš„æ€»ç§°ã€‚Linux åŸºæœ¬å®ç° POSIX å…¼å®¹ï¼ŒWindows éƒ¨åˆ†å®ç°ã€‚ï¼ˆæ¥æºï¼š[ç»´åŸºç™¾ç§‘ï¼šå¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£](https://zh.wikipedia.org/wiki/%E5%8F%AF%E7%A7%BB%E6%A4%8D%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%8E%A5%E5%8F%A3)ï¼‰


Posix çš„ä¸»è¦ç›®çš„æ˜¯åœ¨æºç å±‚é¢æä¾›ç»™å¼€å‘è€…ç»Ÿä¸€çš„æ“ä½œç³»ç»Ÿ APIã€‚å®ƒæœ¬èº«æ˜¯ä¸€ä¸ªè§„èŒƒï¼Œä½†æ˜¯ç³»ç»Ÿæ²¡ä¿è¯ä¸€å®šè½å®ï¼ˆç±»ä¼¼ ES6 è§„èŒƒå’Œ IE çš„å…³ç³»ï¼‰ã€‚


ç”±äºåœ¨ Windows å’Œ Posix ä¸Šï¼Œé’ˆå¯¹ path çš„ä¸€äº›è§„èŒƒä¸ç›¸åŒï¼ˆä¾‹å¦‚åˆ†éš”ç¬¦ï¼‰ï¼Œæ‰€ä»¥ç›¸åŒçš„ api+ç›¸åŒçš„å‚æ•°ï¼Œåœ¨ä¸¤ç§å¹³å°ä¸Šçš„è°ƒç”¨ç»“æœå¯èƒ½ä¸ä¸€æ ·ã€‚


ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œnodejs ä¹Ÿæä¾›äº†`path.win32`å’Œ`path.posix`æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚


ä¾‹å¦‚ï¼Œæˆ‘åœ¨æˆ‘çš„ mac ä¸Šæƒ³è§£æä¸€æ®µ windows è·¯å¾„æ ¼å¼çš„æ•°æ®ï¼Œæ‹¿åˆ°å®ƒçš„ basenameã€‚ä»£ç å¦‚ä¸‹ï¼š


```typescript
const path = require("path");
console.log(path.basename("C:\\temp\\myfile.html")); // output: C:\temp\myfile.html
console.log(path.win32.basename("C:\\temp\\myfile.html")); // output: myfile.html
```


å¯¹æ¯”ç»“æœï¼Œç¬¬ä¸€ç§æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºæœ¬æœºæ˜¯ macã€‚è¿™ä¸¤ç§æ¥å£ï¼Œåœ¨å¤„ç†è·¨å¹³å°çš„æ–‡ä»¶è·¯å¾„æ—¶å€™ï¼Œæœ‰å¾ˆå¤§ä½œç”¨ã€‚


## å‚è€ƒé“¾æ¥

- [æ–‡æ¡£åœ°å€](http://nodejs.cn/api/path.html)

