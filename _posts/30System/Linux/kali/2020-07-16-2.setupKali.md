---
title: Linux - Kali Setup
date: 2020-07-16 11:11:11 -0400
categories: [30System, Kali]
tags: [System, Linux, Kali]
math: true
image:
---


# 2 Linux - Kali Setup

[TOC]

## 2.1 å‡†å¤‡å†…æ ¸å¤´æ–‡ä»¶
å†…æ ¸å¤´æ–‡ä»¶æ˜¯Linuxå†…æ ¸çš„æºä»£ç ã€‚
æœ‰æ—¶å€™ï¼Œç”¨æˆ·éœ€è¦ç¼–è¯‘å†…æ ¸å¤´æ–‡ä»¶ä»£ç ï¼Œä¸ºä»¥åä½¿ç”¨å†…æ ¸å¤´æ–‡ä»¶åšå‡†å¤‡ï¼Œæœ¬èŠ‚å°†ä»‹ç»ç¼–è¯‘å†…æ ¸å¤´æ–‡ä»¶çš„è¯¦ç»†æ­¥éª¤ã€‚

å‡†å¤‡å†…æ ¸å¤´æ–‡ä»¶çš„å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºã€‚


### (1)æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ã€‚
æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š

``root@Kali:~# apt-get update``

or

```
root@Kali:~# apt-get update
root@Kali:~# apt-get upgrade
root@Kali:~# apt-get dist-upgrade
root@Kali:~# reboot
```
or

``root@Kali:~# apt update && apt full-upgrade``

è¾“å‡ºçš„ä¿¡æ¯æ˜¯åœ¨æ›´æ–°è½¯ä»¶æºä¸­æŒ‡å®šçš„è½¯ä»¶ä¸‹è½½é“¾æ¥ã€‚
æ­¤è¿‡ç¨‹ä¸­éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœç½‘é€Ÿå¥½çš„è¯ï¼Œæ›´æ–°çš„é€Ÿåº¦ä¼šå¿«ä¸€ç‚¹ã€‚


### (2)å®‰è£…å†…æ ¸å¤´æ–‡ä»¶ã€‚
æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š

``root@Kali:~# apt-get install linux-headers- `uname -r```


```
æ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨â€¦ å®Œæˆ
æ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘
æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯â€¦ å®Œæˆ
Package 'linux-headers' is not installed, so not removed
æ³¨æ„ï¼Œæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ 3.12-kali1-686-pae é€‰ä¸­äº† nvidia-kernel-3.12-kali1- 686-pae
æ³¨æ„ï¼Œæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ 3.12-kali1-686-pae é€‰ä¸­äº† linux-image-3.12-kali1-686-pae
æ³¨æ„ï¼Œæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ 3.12-kali1-686-pae é€‰ä¸­äº† linux-image-3.12-kali1-686- pae-dbg
æ³¨æ„ï¼Œæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ 3.12-kali1-686-pae é€‰ä¸­äº† linux-modules-3.12-kali1- 686-pae
æ³¨æ„ï¼Œæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ 3.12-kali1-686-pae é€‰ä¸­äº† linux-latest-modules-3.12- kali1-686-pae
æ³¨æ„ï¼Œæ ¹æ®æ­£åˆ™è¡¨è¾¾å¼ 3.12-kali1-686-pae é€‰ä¸­äº† linux-headers-3.12-kali1- 686-pae
æ³¨æ„ï¼Œé€‰å– linux-image-3.12-kali1-686-pae è€Œé linux-modules-3.12-kali1- 686-pae
æ³¨æ„ï¼Œé€‰å– linux-image-686-pae è€Œé linux-latest-modules-3.12-kali1-686-pae
linux-image-3.12-kali1-686-pae å·²ç»æ˜¯æœ€æ–°çš„ç‰ˆæœ¬äº†ã€‚
linux-image-3.12-kali1-686-pae è¢«è®¾ç½®ä¸ºæ‰‹åŠ¨å®‰è£…ã€‚
linux-image-686-pae å·²ç»æ˜¯æœ€æ–°çš„ç‰ˆæœ¬äº†ã€‚
ä¸‹åˆ—è½¯ä»¶åŒ…æ˜¯è‡ªåŠ¨å®‰è£…çš„å¹¶ä¸”ç°åœ¨ä¸éœ€è¦äº†ï¼š
  libmozjs22d libnfc3 libruby libwireshark2 libwiretap2 libwsutil2 python-apsw
  ruby-crack ruby-diff-lcs ruby-rspec ruby-rspec-core ruby-rspec-
  expectations
  ruby-rspec-mocks ruby-simplecov ruby-simplecov-html xulrunner-22.0
Use 'apt-get autoremove' to remove them.
å°†ä¼šå®‰è£…ä¸‹åˆ—é¢å¤–çš„è½¯ä»¶åŒ…ï¼š
  glx-alternative-mesa glx-alternative-nvidia glx-diversions
  linux-headers-3.12-kali1-common linux-kbuild-3.12 nvidia-alternative
  nvidia-installer-cleanup nvidia-kernel-common
å»ºè®®å®‰è£…çš„è½¯ä»¶åŒ…ï¼š
  nvidia-driver
ä¸‹åˆ—ã€æ–°ã€‘è½¯ä»¶åŒ…å°†è¢«å®‰è£…ï¼š
  glx-alternative-mesa glx-alternative-nvidia glx-diversions
  linux-headers-3.12-kali1-686-pae linux-headers-3.12-kali1-common
  linux-image-3.12-kali1-686-pae-dbg linux-kbuild-3.12 nvidia-alternative
  nvidia-installer-cleanup nvidia-kernel-3.12-kali1-686-pae
  nvidia-kernel-common
å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 11 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 5 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚
éœ€è¦ä¸‹è½½ 361 MB çš„è½¯ä»¶åŒ…ã€‚
è§£å‹ç¼©åä¼šæ¶ˆè€—æ‰ 1,812 MB çš„é¢å¤–ç©ºé—´ã€‚
æ‚¨å¸Œæœ›ç»§ç»­æ‰§è¡Œå—ï¼Ÿ[Y/n]y
```

è¾“å‡ºçš„ä¿¡æ¯æ˜¾ç¤ºäº†linux-headersç›¸å…³è½¯ä»¶åŒ…çš„ä¸€ä¸ªä¿¡æ¯ã€‚
æç¤ºå°†ä¼šå®‰è£…å“ªäº›è½¯ä»¶åŒ…åŠè½¯ä»¶åŒ…çš„å¤§å°ç­‰ä¿¡æ¯ã€‚
æ­¤æ—¶è¾“å…¥yï¼Œç»§ç»­å®‰è£…ã€‚å®‰è£…å®Œåï¼Œå°†é€€å‡ºç¨‹åºã€‚


### (3)æ£€è½¦å†…æ ¸å¤´æ–‡ä»¶æ˜¯å¦å®‰è£…
``root@Kali:~# dpkg-query -s linux-headers-$(uname -r)``

### (4)å¤åˆ¶generatedä¸‹çš„æ‰€æœ‰å†…å®¹ã€‚
æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
```
root@Kali:~# cd /usr/src/linux-headers-5.2.0-kali2-amd64/
root@Kali:/usr/src/linux-headers-5.2.0-kali2-amd64# cp -rf include/generated/* include/linux/
(ä¸è¡ŒğŸ™…)
```

### (5)ç¼–è¯‘å†…æ ¸å¤´æ–‡ä»¶ä»£ç ã€‚

---

## 2.2 å®‰è£…å¹¶é…ç½®NVIDIAæ˜¾å¡é©±åŠ¨
æ˜¾å¡é©±åŠ¨ç¨‹åºå°±æ˜¯ç”¨æ¥é©±åŠ¨æ˜¾å¡çš„ç¨‹åºï¼Œå®ƒæ˜¯ç¡¬ä»¶æ‰€å¯¹åº”çš„è½¯ä»¶ã€‚
é©±åŠ¨ç¨‹åºå³æ·»åŠ åˆ°æ“ä½œç³»ç»Ÿä¸­çš„ä¸€å°å—ä»£ç ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³ç¡¬ä»¶è®¾å¤‡çš„ä¿¡æ¯ã€‚
æœ‰äº†æ­¤ä¿¡æ¯ï¼Œè®¡ç®—æœºå°±å¯ä»¥ä¸è®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚

é©±åŠ¨ç¨‹åºæ˜¯ç¡¬ä»¶å‚å•†æ ¹æ®æ“ä½œç³»ç»Ÿç¼–å†™çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è¯´æ²¡æœ‰é©±åŠ¨ç¨‹åºï¼Œè®¡ç®—æœºä¸­çš„ç¡¬ä»¶å°±æ— æ³•å·¥ä½œã€‚
æ“ä½œç³»ç»Ÿä¸åŒï¼Œç¡¬ä»¶çš„é©±åŠ¨ç¨‹åºä¹Ÿä¸åŒã€‚

å®‰è£…NVIDIAæ˜¾å¡é©±åŠ¨çš„å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºã€‚


1. å®‰è£…nvidiaé©±åŠ¨
æ‰§è¡Œå‘½ä»¤åé‡å¯ä¼šè¿›å…¥ä¸äº†å›¾å½¢ç•Œé¢ï¼Œéœ€è¦è¿›å…¥å‘½ä»¤è¡Œç•Œé¢Ctrl+Alt+f3

``apt install -y ocl-icd-libopencl1 nvidia-driver nvidia-cuda-toolkit``


6. éªŒè¯nvidiaé©±åŠ¨ ``# nvidia-smi``

7. å®‰è£…hashcat
```
# aptitude search hashcat
# aptitude install hashcat
# hashcat --help
```



ï¼ˆ1ï¼‰å°†å¼€æºçš„NVIDIAé©±åŠ¨nouveau**åŠ å…¥é»‘åå•**
åœ¨blacklist.confæ–‡ä»¶ä¸­æ·»åŠ äº†blacklist nouveauä¸€è¡Œå†…å®¹:
```
root@kali:~# vi /etc/modprobe.d/blacklist.conf
blacklist nouveau
```


ï¼ˆ2ï¼‰**æŸ¥çœ‹å½“å‰çš„ç³»ç»Ÿä¿¡æ¯**
```
root@kali:~# uname -a
Linux kali 5.2.0-kali2-amd64 #1 SMP Debian 5.2.9-2kali1 (2019-08-22) x86_64 GNU/Linux
```
ä»è¾“å‡ºçš„ä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°å½“å‰ç³»ç»Ÿå®‰è£…çš„æ˜¯Kaliï¼Œå…¶å†…æ ¸ç‰ˆæœ¬ä¸º5.2.0ï¼Œç³»ç»Ÿæ¶æ„æ˜¯x86_64ä½ã€‚

ï¼ˆ3ï¼‰**å®‰è£…Linuxå¤´æ–‡ä»¶**

``root@kali:~# aptitude -r install linux-headers-$(uname -r)``

bash: aptitude: command not found(ä¸è¡ŒğŸ™…)

```
ä¸‹åˆ—â€œæ–°â€è½¯ä»¶åŒ…å°†è¢«å®‰è£…ã€‚
  linux-headers-3.12-kali1-686-pae linux-headers-3.12-kali1-common{a}
  linux-kbuild-3.12{a}
ä¸‹åˆ—è½¯ä»¶åŒ…å°†è¢«â€œåˆ é™¤â€ï¼š
  firmware-mod-kit{u} libadns1{u} libcrypto++9{u} liblzma-dev{u}
  libsmi2-common{u} libwebkit-dev{u} msgpack-python{u} p7zip{u}
  python-adns{u} python-bs4{u} python-easygui{u} python-ipy{u}
  python-levenshtein{u} python-mechanize{u} python-metaconfig{u}
  python-paramiko{u} python-pycryptopp{u} python-pysnmp4{u}
  python-pysnmp4-apps{u} python-pysnmp4-mibs{u} sqlmap{u} unrar-free{u}
0 ä¸ªè½¯ä»¶åŒ…è¢«å‡çº§ï¼Œæ–°å®‰è£… 3 ä¸ªï¼Œ22 ä¸ªå°†è¢«åˆ é™¤ï¼Œ åŒæ—¶ 206 ä¸ªå°†ä¸å‡çº§ã€‚
éœ€è¦è·å– 4,848 kB çš„å­˜æ¡£ã€‚è§£åŒ…åå°†é‡Šæ”¾ 55.4 MBã€‚
æ‚¨è¦ç»§ç»­å—ï¼Ÿ[Y/n] y
```
ä»¥ä¸Šè¾“å‡ºä¿¡æ¯æ˜¾ç¤ºäº†å½“å‰è¦å®‰è£…çš„è½¯ä»¶åŒ…æ•°ã€å°†è¢«åˆ é™¤çš„è½¯ä»¶åŒ…å’Œå‡çº§çš„è½¯ä»¶åŒ…ç­‰ã€‚æ­¤æ—¶è¾“å…¥yï¼Œç»§ç»­å®‰è£…ã€‚




ï¼ˆ4ï¼‰å®‰è£…NVIDIAå†…æ ¸ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
``root@kali:~# apt-get install nvidia-kernel-5.2.0-kali2-amd64``
æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œå°†æ˜¾ç¤ºå®‰è£…nvidia-kernelåŒ…çš„å®‰è£…è¿‡ç¨‹ã€‚æ­¤æ—¶ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®ä»»ä½•ä¿¡æ¯ï¼Œå°†è‡ªåŠ¨å®‰è£…å®Œæˆã€‚

ï¼ˆ5ï¼‰å®‰è£…NVIDIAé©±åŠ¨nvidia-kernel-dkmsåŒ…ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
``root@kali:~# aptitude install nvidia-kernel-dkms``
```
ä¸‹åˆ—â€œæ–°â€è½¯ä»¶åŒ…å°†è¢«å®‰è£…ã€‚
  dkms{a} glx-alternative-mesa{a} glx-alternative-nvidia{a}
  glx-diversions{a} libgl1-nvidia-glx{a} libvdpau1{a}
  linux-headers-3.12-kali1-686-pae{a} linux-headers-3.12-kali1-common{a}
  linux-headers-686-pae{a} linux-kbuild-3.12{a} nvidia-alternative{a}
  nvidia-driver{a} nvidia-installer-cleanup{a} nvidia-kernel-common{a}
  nvidia-kernel-dkms nvidia-vdpau-driver{a} xserver-xorg-video-nvidia{a}
0 ä¸ªè½¯ä»¶åŒ…è¢«å‡çº§ï¼Œæ–°å®‰è£… 17 ä¸ªï¼Œ0 ä¸ªå°†è¢«åˆ é™¤ï¼Œ åŒæ—¶ 207 ä¸ªå°†ä¸å‡çº§ã€‚
éœ€è¦è·å– 29.4 MB çš„å­˜æ¡£ã€‚è§£åŒ…åå°†è¦ä½¿ç”¨ 108 MBã€‚
æ‚¨è¦ç»§ç»­å—ï¼Ÿ[Y/n] y
```
ä»¥ä¸Šè¾“å‡ºä¿¡æ¯æ˜¾ç¤ºäº†å°†å®‰è£…çš„è½¯ä»¶åŒ…åŠè½¯ä»¶åŒ…çš„å¤§å°ã€‚æ­¤æ—¶è¾“å…¥yï¼Œç»§ç»­å®‰è£…ã€‚åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°å¦‚å›¾2.1æ‰€ç¤ºçš„ç•Œé¢ã€‚
047-01

å›¾2.1 é…ç½®xserver-xorg
è¯¥ç•Œé¢æç¤ºéœ€è¦é…ç½®xserver-xorg-video-nvidiaã€‚åœ¨è¯¥ç•Œé¢å•å‡»OKæŒ‰é’®ï¼Œåé¢æ‰‹åŠ¨è¿›è¡Œé…ç½®ã€‚

ï¼ˆ6ï¼‰å®‰è£…NVIDIAæ˜¾å¡é©±åŠ¨åº”ç”¨ç¨‹åºnvidia-xconfigåŒ…ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@kali:~# aptitude install nvidia-xconfig
ï¼ˆ7ï¼‰ç”ŸæˆXorgæœåŠ¡é…ç½®æ–‡ä»¶ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@kali:~# nvidia-xconfig
æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œå°†è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºçš„ä¿¡æ¯ã€‚
WARNING: Unable to locate/open X configuration file.
New X configuration file written to '/etc/X11/xorg.conf'
è¾“å‡ºçš„ä¿¡æ¯ï¼Œè¡¨ç¤ºé‡æ–°ç”Ÿæˆäº†xorg.confæ–‡ä»¶ã€‚ç„¶åï¼Œé‡æ–°å¯åŠ¨ç³»ç»Ÿã€‚
ï¼ˆ8ï¼‰æ£€æŸ¥NVIDIAæ˜¾å¡é©±åŠ¨æ˜¯å¦æˆåŠŸå®‰è£…ã€‚é¦–å…ˆæ£€æŸ¥GLXæ¨¡å—ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@kali:~# glxinfo | grep -i "direct rendering"
direct rendering: Yes
æ£€æŸ¥NVIDIAé©±åŠ¨æ¨¡å—ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@kali:~# lsmod | grep nvidia
nvidia               9442880 29
i2c_core             24129 2 i2c_i801,nvidia
root@kali:~# lsmod | grep nouveau
é€šè¿‡æŸ¥çœ‹ä»¥ä¸‹æ–‡ä»¶çš„å†…å®¹ï¼Œç¡®å®šå¼€æºçš„NVIDIAé©±åŠ¨nouveauæ˜¯å¦è¢«åŠ å…¥é»‘åå•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```
root@kali:~# cat /etc/modprobe.d/nvidia.conf
alias nvidia nvidia-current
remove nvidia-current rmmod nvidia
root@kali:~# cat /etc/modprobe.d/nvidia-blacklists-nouveau.conf
# You need to run "update-initramfs -u" after editing this file.
# see #580894
blacklist nouveau
root@kali:~# cat /etc/modprobe.d/nvidia-kernel-common.conf
alias char-major-195* nvidia

options nvidia NVreg_DeviceFileUID=0 NVreg_DeviceFileGID=44 NVreg_Device FileMode=0660
# To enable FastWrites and Sidebus addressing, uncomment these lines
# options nvidia NVreg_EnableAGPSBA=1
# options nvidia NVreg_EnableAGPFW=1
```
çœ‹åˆ°ä»¥ä¸Šè¾“å‡ºä¿¡æ¯ï¼Œå°±è¡¨ç¤ºnouveauå·²è¢«åŠ å…¥é»‘åå•ã€‚
ä¸ºäº†åŠ å¿«ç”¨æˆ·ç ´è§£ä¸€äº›å¤§æ•°æ®æ–‡ä»¶ï¼Œéœ€è¦å®‰è£…CUDAï¼ˆCompute Unified Device Architectureï¼‰ã€‚CUDAæ˜¯ä¸€ç§ç”±NVIDIAæ¨å‡ºçš„é€šç”¨å¹¶è¡Œè®¡ç®—æ¶æ„ï¼Œè¯¥æ¶æ„ä½¿GPUèƒ½å¤Ÿè§£å†³å¤æ‚çš„è®¡ç®—é—®é¢˜ã€‚
å®‰è£…NVIDIA CUDAå·¥å…·é›†å’ŒNVIDIA openCLã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@kali:~# aptitude install nvidia-cuda-toolkit nvidia-opencl-icd
æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œå¦‚æœè¾“å‡ºè¿‡ç¨‹ä¸­æ²¡æœ‰å‡ºé”™çš„è¯ï¼Œè¡¨ç¤ºè¯¥è½¯ä»¶åŒ…å®‰è£…æˆåŠŸã€‚ä»¥åå°±å¯ä»¥ä½¿ç”¨CUDAç ´è§£åŠ å¯†çš„å¤§æ•°æ®æ–‡ä»¶ã€‚

---

## 2.3 åº”ç”¨æ›´æ–°å’Œé…ç½®é¢å¤–å®‰å…¨å·¥å…·
Kaliè½¯ä»¶åŒ…ä¸æ–­åœ°æ›´æ–°å’Œå‘å¸ƒä¹‹é—´ï¼Œç”¨æˆ·å¾ˆå¿«å‘ç°ä¸€å¥—æ–°çš„å·¥å…·æ¯”æœ€åˆåœ¨DVD ROMä¸Šä¸‹è½½çš„è½¯ä»¶åŒ…æ›´æœ‰ç”¨ã€‚
æœ¬èŠ‚å°†é€šè¿‡æ›´æ–°å®‰è£…çš„æ–¹æ³•ï¼Œè·å–Nessusçš„ä¸€ä¸ªæ¿€æ´»ç ã€‚æœ€åå®‰è£…Squidã€‚

åº”ç”¨æ›´æ–°å’Œé…ç½®é¢å¤–å®‰å…¨å·¥å…·çš„å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºã€‚

1. æ›´æ–°æœ¬åœ°è½¯ä»¶åŒ…åˆ—è¡¨åº“ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@Kali:~# apt-get update

2. å‡çº§å·²å­˜åœ¨çš„åŒ…ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@Kali:~# apt-get upgrade

3. å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@Kali:~# apt-get dist-upgrade

---

## install nessus

1. è·å–ä¸€ä¸ªæ¿€æ´»ç 
å®˜ç½‘: http://www.nessus.org/products/nessus/nessus-plugins/obtain-an-activation-code
Your activation code for Nessus Essentials is:8403-1D7E-394F-EFB0-957D

2. download deb.
```
root@kali:~# cd Downloads
root@kali:~/Downloads# dpkg -i Nessus-8.6.0-debian6_amd64.deb
Selecting previously unselected package nessus.
(Reading database ... 359321 files and directories currently installed.)
Preparing to unpack Nessus-8.6.0-debian6_amd64.deb ...
Unpacking nessus (8.6.0) ...
Setting up nessus (8.6.0) ...
Unpacking Nessus Scanner Core Components...

 - You can start Nessus Scanner by typing /etc/init.d/nessusd start
 - Then go to https://kali:8834/ to configure your scanner

Processing triggers for systemd (242-5) ...
```
* start Nessus Scanner by typing /etc/init.d/nessusd start
* Then go to https://kali:8834/ to configure your scanner

3. è¾“å…¥å‘½ä»¤å¯åŠ¨NessusæœåŠ¡ï¼š
``root@kali:~/Downloads# /etc/init.d/nessusd start``

4. æ‰“å¼€æµè§ˆå™¨
* è®¿é—®ï¼šhttps://kali:8834/
* ç¬¬ä¸€æ¬¡è®¿é—®ä¼šå‡ºç°å¦‚ä¸‹æç¤º
* ç‚¹å‡»Advanced => Add Exception => Confirm Security Exception
* user info > activation code >



ï¼ˆ5ï¼‰ä¸ºNessusç½‘ç»œæ¥å£åˆ›å»ºä¸€ä¸ªç”¨æˆ·è´¦æˆ·ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@Kali:~# /opt/nessus/sbin/nessus-adduser
Login :admin                                 #è¾“å…¥ç”¨æˆ·åä¸ºadmin
Login password :                              #è¾“å…¥ç”¨æˆ·å¯†ç 
Login password (again) :                     #è¾“å…¥ç¡®è®¤å¯†ç 
Do you want this user to be a Nessus 'admin' user ? (can upload plugins, etc...) (y/n) [n]: y
User rules                                   #ç”¨æˆ·è§„åˆ™
----------
nessusd has a rules system which allows you to restrict the hosts
that admin has the right to test. For instance, you may want
him to be able to scan his own host only.
Please see the nessus-adduser manual for the rules syntax
Enter the rules for this user, and enter a BLANK LINE once you are done :
(the user can have an empty rules set)     #æŒ‰ä¸‹ç©ºæ ¼é”®æäº¤è¾“å…¥
Login            : admin
Password         : ***********
This user will have 'admin' privileges within the Nessus server
Rules            :
Is that ok ? (y/n) [y] y
User added                                  #ç”¨æˆ·è¢«æ·»åŠ 
ä»è¾“å‡ºçš„ä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ°adminç”¨æˆ·è¢«æ·»åŠ æˆåŠŸäº†ã€‚

ï¼ˆ6ï¼‰æ¿€æ´»Nessusã€‚
``root@Kali:~# /opt/nessus/bin/nessus-fetch --register  XXXX-XXXX-XXXX- XXXX-XXXX(æ¿€æ´»ç )``
```
Your Activation Code has been registered properly - thank you.
Now fetching the newest plugin set from plugins.nessus.org   #ç­‰å¾…ä¸€æ®µæ—¶é—´
Could not verify the signature of all-2.0.tar.gz        #ä¸èƒ½è¯å®all-2.0.tar.gzçš„ç­¾å
```

ï¼ˆ7ï¼‰å¯åŠ¨NessusæœåŠ¡ã€‚
``root@Kali:~# /etc/init.d/nessusd start``


åœ¨ç¬¬ï¼ˆ6ï¼‰æ­¥éª¤ä¸­æ¿€æ´»Nessusæ—¶ï¼Œè¾“å‡ºå’Œä»¥ä¸Šç›¸åŒçš„ä¿¡æ¯ï¼Œè¡¨ç¤ºæ²¡æœ‰æ¿€æ´»Nessusã€‚è¿™ä¸ªé—®é¢˜åœ¨RHELä¸Šä¸ä¼šå‡ºç°çš„ã€‚ä¸è¿‡ï¼Œè¿™é‡Œæœ‰æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ æ‰€ç¤ºã€‚
ï¼ˆ1ï¼‰åˆ é™¤æ–‡ä»¶nessus-fetch.rcã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@Kali:~# rm /opt/nessus/etc/nessus/nessus-fetch.rc
ï¼ˆ2ï¼‰ä½¿ç”¨nessus-fetch --challengeè·å–æŒ‘æˆ˜ç ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@Kali:~# /opt/nessus/bin/nessus-fetch --challenge

Challenge code: xxxxxxxxxxxxxxxxxxxxxxxx

You can copy the challenge code above and paste it alongside your
Activation Code at:
https://plugins.nessus.org/offline.php
å…¶ä¸­ï¼Œxxxxxxxxxxxxxxxxxxxxxxxxæ˜¯è¾“å‡ºçš„æŒ‘æˆ˜ç ã€‚
ï¼ˆ3ï¼‰é‡æ–°ç™»å½•http://www.nessus.org/products/nessus/nessus-plugins/obtain-an-activation- codeç½‘ç«™è·å–æ¿€æ´»ç ã€‚
ï¼ˆ4ï¼‰ç™»å½•https://plugins.nessus.org/offline.phpç½‘ç«™ï¼Œåœ¨è¯¥ç•Œé¢è¾“å…¥ç”Ÿæˆçš„æŒ‘æˆ˜ç å’Œæ¿€æ´»ç ï¼Œå¦‚å›¾2.4æ‰€ç¤ºçš„ç•Œé¢ã€‚
051-01

å›¾2.4 è·å–æ’ä»¶
æ­¤æ—¶å•å‡»SubmitæŒ‰é’®ï¼Œå°†æ˜¾ç¤ºå¦‚å›¾2.5æ‰€ç¤ºçš„ç•Œé¢ã€‚
051-02

å›¾2.5 ä¸‹è½½æ’ä»¶
ä»è¯¥ç•Œé¢ä¸‹è½½nessus-fetch.rcå’Œall-2.0.tar.gzï¼Œå°†å…¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚
ï¼ˆ5ï¼‰å°†ä¸‹è½½åˆ°çš„nessus-fetch.rcæ–‡ä»¶å¤åˆ¶åˆ°/opt/nessus/etc/nessus/ç›®å½•ä¸‹ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@Kali:~# cp /root/nessus-fetch.rc /opt/nessus/etc/nessus
æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œæ²¡æœ‰ä»»ä½•è¾“å‡ºä¿¡æ¯ã€‚
ï¼ˆ6ï¼‰ä½¿ç”¨nessus-update-pluginså‘½ä»¤å°†Nessusçš„æ’ä»¶all-2.0.tar.gzåŠ è½½ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@Kali:~# /opt/nessus/sbin/nessus-update-plugins /root/all/all-2.0.tar.gz
Expanding /root/all/all-2.0.tar.gzâ€¦
Done. The Nessus server will start processing these plugins within a minute
ï¼ˆ7ï¼‰é‡æ–°å¯åŠ¨NessusæœåŠ¡ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
root@Kali:~# /etc/init.d/nessusd restart
$Shutting down Nessus : .
$Starting Nessus : .
ä»¥ä¸Šæ­¥éª¤æ“ä½œå®Œæˆåï¼ŒNessuså°±è¢«æ¿€æ´»äº†ã€‚å¦‚æœä¸æ¿€æ´»Nessusï¼Œå®ƒæ˜¯ä¸èƒ½ä½¿ç”¨çš„ã€‚


---

## å®‰è£…SquidæœåŠ¡
``root@Kali:~# apt-get install squid3``

è®¾ç½®SquidæœåŠ¡å¼€æœºä¸è‡ªåŠ¨å¯åŠ¨ã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
``root@Kali:~# update-rc.d -f squid3 remove``


---


## 2.4 è®¾ç½®ProxyChains
ProxyChainsæ˜¯Linuxå’Œå…¶ä»–Unicesä¸‹çš„ä»£ç†å·¥å…·ã€‚
å®ƒå¯ä»¥ä½¿ä»»ä½•ç¨‹åºé€šè¿‡ä»£ç†ä¸Šç½‘ï¼Œå…è®¸TCPå’ŒDNSé€šè¿‡ä»£ç†éš§é“ï¼Œæ”¯æŒHTTPã€SOCKS4å’ŒSOCKS5ç±»å‹çš„ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶ä¸”å¯é…ç½®å¤šä¸ªä»£ç†ã€‚
ProxyChainsé€šè¿‡ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„ä»£ç†åˆ—è¡¨å¼ºåˆ¶è¿æ¥æŒ‡å®šçš„åº”ç”¨ç¨‹åºï¼Œç›´æ¥æ–­å¼€æ¥æ”¶æ–¹å’Œå‘é€æ–¹çš„è¿æ¥ã€‚

### 1. æ‰“å¼€ProxyChainsé…ç½®æ–‡ä»¶
``root@Kali:~# vi /etc/proxychains.conf``
æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œæ‰“å¼€æ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š
```
# proxychains.conf VER 3.1
#
# HTTP, SOCKS4, SOCKS5 tunneling proxifier with DNS.
#
# The option below identifies how the ProxyList is treated.
# only one option should be uncommented at time,
# otherwise the last appearing option will be accepted
#
#dynamic_chain
#
# Dynamic - Each connection will be done via chained proxies
# all proxies chained in the order as they appear in the list
# at least one proxy must be online to play in chain
# (dead proxies are skipped)
# otherwise EINTR is returned to the app
#
strict_chain
#
# Strict - Each connection will be done via chained proxies
# all proxies chained in the order as they appear in the list
# all proxies must be online to play in chain
# otherwise EINTR is returned to the app
#
#random_chain
#
# Random - Each connection will be done via random proxy
# (or proxy chain, see chain_len) from the list.
# this option is good to test your IDS :)
```


```
#               http    192.168.39.93   8080
#
#
#       proxy types: http, socks4, socks5
#        ( auth types supported: "basic"-http  "user/pass"-socks )
#
[ProxyList]
# add proxy here ...
# meanwile
# defaults set to "tor"
socks4  127.0.0.1 9050

~
~
~
~
~
~
-- VISUAL --                                 65        65,0-1        Bot
```


### 2.
å°†proxychains.confæ–‡ä»¶ä¸­çš„dynamic_chainå‰é¢çš„æ³¨é‡Šç¬¦å–æ¶ˆã€‚è¦ä¿®æ”¹çš„é…ç½®é¡¹ï¼Œæ˜¯ä¸Šé¢åŠ ç²—çš„éƒ¨åˆ†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
``dynamic_chain``


### 3.
æ·»åŠ ä¸€äº›ä»£ç†æœåŠ¡å™¨åˆ°åˆ—è¡¨ï¼ˆproxychains.confæ–‡ä»¶æœ«å°¾ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
```
# ProxyList format
#       type  host  port [user pass]
#       (values separated by 'tab' or 'blank')
#
#
#        Examples:
#
#               socks5  192.168.67.78   1080    lamer   secret
#               http    192.168.89.3    8080    justu   hidden
#               socks4  192.168.1.49    1080
#               http    192.168.39.93   8080
#
#
#       proxy types: http, socks4, socks5
#        ( auth types supported: "basic"-http  "user/pass"-socks )
#
[ProxyList]
# add proxy here ...
# meanwile
# defaults set to "tor"
socks4  127.0.0.1 9050
socks5  98.206.2.3 1893  (æ·»åŠ çš„ä»£ç†æœåŠ¡å™¨)
socks5 76.22.86.170 1658 (æ·»åŠ çš„ä»£ç†æœåŠ¡å™¨)
-- æ’å…¥ --
```

### 4. é€šè¿‡ç”¨æˆ·çš„è¿æ¥ä»£ç†è§£æç›®æ ‡ä¸»æœº

``root@kali:~# proxyresolv www.target.com``

* é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰§è¡Œproxyresolvå‘½ä»¤ï¼Œå¯èƒ½çœ‹åˆ°è¯¥å‘½ä»¤æ²¡æ‰¾åˆ°é”™è¯¯ä¿¡æ¯ã€‚
* å› ä¸ºproxyresolvä¿å­˜åœ¨/usr/lib/proxychains3/ç›®å½•ä¸­ï¼Œè€Œä¸èƒ½è¢«æ‰§è¡Œã€‚

proxyresolvä¼šè¢«proxychainsè°ƒç”¨ï¼Œæ‰€ä»¥å°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œå¦‚/usr/binã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š
``root@kali:~# cp /usr/lib/proxychains3/proxyresolv /usr/bin/``
æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤åï¼Œproxyresolvå‘½ä»¤å°±å¯ä»¥æ‰§è¡Œäº†ã€‚


### 5. é€šè¿‡ç”¨æˆ·æƒ³è¦ä½¿ç”¨çš„åº”ç”¨ç¨‹åºè¿è¡ŒProxyChains
ä¾‹å¦‚ï¼Œå¯åŠ¨msfconsoleã€‚æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š

``root@kali:~# proxychains msfconsole ``

```
ProxyChains-3.1 (https://proxychains.sf.net)
|DNS-request| 0.0.0.0
|S-chain|-<>-127.0.0.1:9050-<--timeout
|DNS-response|: 0.0.0.0 is not exist
     ,           ,
     /             \
   ((__---,,,---__))
     (_) O O (_)_________
          \ _ /             |\
          o_o \   M S F   | \
                \   _____  |  *
                 |||    WW |||
                 |||        |||

Tired of typing 'set RHOSTS'? Click & pwn with Metasploit Pro
-- type 'go_pro' to launch it now.

       =[ metasploit v4.7.0-2013082802 [core:4.7 api:1.0]
+ -- --=[ 1161 exploits - 641 auxiliary - 180 post
+ -- --=[ 310 payloads - 30 encoders - 8 nops

msf >
```


```
ProxyChains-3.1 (https://proxychains.sf.net)
[-] ***rTing the Metasploit Framework console...|
[-] * WARNING: No database support: No database YAML file
[-] ***

 _                                                    _
/ \    /\         __                         _   __  /_/ __
| |\  / | _____   \ \           ___   _____ | | /  \ _   \ \
| | \/| | | ___\ |- -|   /\    / __\ | -__/ | || | || | |- -|
|_|   | | | _|__  | |_  / -\ __\ \   | |    | | \__/| |  | |_
      |/  |____/  \___\/ /\ \\___/   \/     \__|    |_\  \___\


       =[ metasploit v5.0.46-dev                          ]
+ -- --=[ 1921 exploits - 1075 auxiliary - 330 post       ]
+ -- --=[ 556 payloads - 45 encoders - 10 nops            ]
+ -- --=[ 4 evasion                                       ]

msf5 >
```

`msf>` è¡¨ç¤ºmsfconsoleå¯åŠ¨æˆåŠŸäº†ã€‚è¡¨ç¤ºProxyChainsè®¾ç½®æˆåŠŸã€‚

---



## 2.5 ç›®å½•åŠ å¯†

å¼€æºçš„ç»¿è‰²åŠ å¯†å·åŠ å¯†è½¯ä»¶ï¼Œä¸éœ€è¦ç”Ÿæˆä»»ä½•æ–‡ä»¶å³å¯åœ¨ç¡¬ç›˜ä¸Šå»ºç«‹è™šæ‹Ÿç£ç›˜ã€‚
ç”¨æˆ·å¯ä»¥æŒ‰ç…§ç›˜ç¬¦è¿›è¡Œè®¿é—®ï¼Œæ‰€ä»¥è™šæ‹Ÿç£ç›˜ä¸Šçš„æ–‡ä»¶éƒ½è¢«è‡ªåŠ¨åŠ å¯†ï¼Œè®¿é—®æ—¶éœ€è¦ä½¿ç”¨å¯†ç è§£å¯†ã€‚

TrueCryptæä¾›å¤šç§åŠ å¯†ç®—æ³•ï¼ŒåŒ…æ‹¬AESã€Serpentã€Twofishã€AES-Twofishå’ŒAES-Twofish-Serpentç­‰ã€‚

### å®‰è£… truecrypt

#### 1. å¯åŠ¨TrueCryptå·¥å…·ã€‚
``root@kali:~# truecrypt``

#### 2. Create Volume
1. choose Slot 1
2. å•å‡»Create VolumeæŒ‰é’®ï¼Œ


#### 3.
åœ¨è¯¥ç•Œé¢é€‰æ‹©åˆ›å»ºå·å®¹å™¨ï¼Œè¿™é‡Œé€‰æ‹©é»˜è®¤çš„Create an encrypted file containeré€‰é¡¹ï¼Œå•å‡»NextæŒ‰é’®
#### 4. è¯¥ç•Œé¢é€‰æ‹©å·ç±»å‹
è¿™é‡Œé€‰æ‹©é»˜è®¤çš„Standard TrueCrypt volumeï¼Œå•å‡»NextæŒ‰é’®
ï¼ˆ5ï¼‰åœ¨è¯¥ç•Œé¢å•å‡»Select Fileâ€¦æŒ‰é’®
ï¼ˆ6ï¼‰åœ¨è¯¥ç•Œé¢ä¸ºæ–°å·æŒ‡å®šä¸€ä¸ªåç§°å’Œä½ç½®ï¼Œè¿™é‡Œåˆ›å»ºçš„å·åç§°ä¸ºCryptVolumeï¼Œä¿å­˜åœ¨/rootç›®å½•ä¸‹ã€‚ç„¶åå•å‡»â€œä¿å­˜â€æŒ‰é’®
ï¼ˆ7ï¼‰åœ¨è¯¥ç•Œé¢å¯ä»¥çœ‹åˆ°å‰é¢åˆ›å»ºçš„å·çš„åç§°å’Œä½ç½®ã€‚ç„¶åå•å‡»NextæŒ‰é’®ï¼Œ
ï¼ˆ8ï¼‰åœ¨è¯¥ç•Œé¢é€‰æ‹©åŠ å¯†ç®—æ³•ï¼Œè¿™é‡Œé€‰æ‹©é»˜è®¤çš„åŠ å¯†ç®—æ³•AESï¼Œç„¶åå•å‡»NextæŒ‰é’®ï¼Œ
ï¼ˆ9ï¼‰åœ¨è¯¥ç•Œé¢æŒ‡å®šå·çš„å¤§å°ä¸º10GBï¼Œç„¶åå•å‡»NextæŒ‰é’®ï¼Œ
ï¼ˆ10ï¼‰åœ¨è¯¥ç•Œé¢è¾“å…¥ä¸€ä¸ªå·çš„å¯†ç ï¼Œç„¶åå•å‡»NextæŒ‰é’®ï¼Œ
ï¼ˆ11ï¼‰è¯¥ç•Œé¢æç¤ºè®¾ç½®çš„å¯†ç å¤ªçŸ­ï¼Œå»ºè®®å¤§å°20ä¸ªå­—ç¬¦ã€‚å¦‚æœç¡®è®¤è¦ä½¿ç”¨è¯¥å¯†ç çš„è¯ï¼Œå•å‡»â€œæ˜¯â€æŒ‰é’®
ï¼ˆ12ï¼‰åœ¨è¯¥ç•Œé¢é€‰æ‹©å­˜å‚¨åˆ°å·æ–‡ä»¶çš„å¤§å°ï¼Œè¿™é‡Œé€‰æ‹©I will not store files larger than 4GB on the volumeã€‚ç„¶åå•å‡»NextæŒ‰é’®
ï¼ˆ13ï¼‰åœ¨è¯¥ç•Œé¢é€‰æ‹©æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œé»˜è®¤æ˜¯FATã€‚è¯¥å·¥å…·è¿˜æ”¯æŒLinux Ext2ã€Linux EXt3å’ŒLinux Ext4æ–‡ä»¶ç±»å‹ã€‚è¿™é‡Œé€‰æ‹©Linux Ext4ï¼Œå•å‡»NextæŒ‰é’®
ï¼ˆ14ï¼‰è¯¥ç•Œé¢é€‰æ‹©æŒ‚è½½è¯¥å·çš„ä¸€ä¸ªå¹³å°ï¼Œè¿™é‡Œé€‰æ‹©ç¬¬äºŒç§æ–¹å¼I will mount the volume only on Linuxï¼Œå•å‡»NextæŒ‰é’®ï¼Œ
ï¼ˆ15ï¼‰ç°åœ¨è¦æ ¼å¼åŒ–å‰é¢åˆ›å»ºçš„å·ï¼Œæ­¤æ—¶å•å‡»FormatæŒ‰é’®
ï¼ˆ16ï¼‰è¯¥ç•Œé¢æ˜¾ç¤ºäº†æ ¼å¼åŒ–çš„è¿›åº¦ã€é€Ÿåº¦å’Œæ—¶é—´ç­‰ä¿¡æ¯ã€‚è¯¥è¿‡ç¨‹è¿è¡Œå®Œåï¼Œå°†æ˜¾ç¤ºå¦‚å›¾2.21æ‰€ç¤ºçš„ç•Œé¢ã€‚
ï¼ˆ17ï¼‰çœ‹åˆ°ä¸Šé¢çš„çª—å£ï¼Œè¡¨ç¤ºTrueCryptå·åˆ›å»ºæˆåŠŸäº†ã€‚æ­¤æ—¶ï¼Œå•å‡»â€œç¡®å®šâ€æŒ‰é’®
ï¼ˆ18ï¼‰æ­¤æ—¶TrueCryptå·å°±åˆ›å»ºå®Œæˆäº†ã€‚å¦‚æœè¿˜æƒ³è¦åˆ›å»ºå¦ä¸€ä¸ªTrueCryptå·çš„è¯ï¼Œå•å‡»NextæŒ‰é’®ã€‚å¦åˆ™å•å‡»ExitæŒ‰é’®ã€‚å•å‡»ExitæŒ‰é’®åï¼Œå°†è¿”å›åˆ°å›¾2.6æ‰€ç¤ºçš„ç•Œé¢ã€‚

### 2.5.2 æ–‡ä»¶å¤¹è§£å¯†
åœ¨ä¸Šä¸€å°èŠ‚ä¸­æˆåŠŸåˆ›å»ºäº†åŠ å¯†ç›®å½•ã€‚å¦‚æœè¦æŸ¥çœ‹åŠ å¯†çš„å†…å®¹ï¼Œéœ€è¦å°†è¯¥å·è§£å¯†åæ‰å¯è®¿é—®ã€‚ä¸ºäº†è§£å¯†å·ï¼Œéœ€è¦ä»å›¾2.6çš„åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªæ§½ã€‚ç„¶åå•å‡»Select Fileâ€¦æŒ‰é’®ï¼Œæ‰“å¼€åˆšæ‰åˆ›å»ºçš„CryptVolumeå·ã€‚è¿™æ—¶å•å‡»MountæŒ‰é’®ï¼Œ
åœ¨è¯¥ç•Œé¢è¾“å…¥åˆ›å»ºCryptVolumeæ—¶è®¾ç½®çš„å¯†ç ï¼Œå•å‡»â€œç¡®å®šâ€æŒ‰é’®
ä»è¯¥ç•Œé¢å¯ä»¥çœ‹åˆ°CryptVolumeå·çš„æŒ‚è½½ä¿¡æ¯ã€å¤§å°å’Œå·çš„ä½ç½®ç­‰ã€‚æ­¤æ—¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡åŒå‡»åœ¨æ§½ä¸­çš„å·æˆ–è€…æŒ‚è½½ç‚¹æ¥è®¿é—®è¿™ä¸ªå·ã€‚å½“å¯¹è¯¥æ–‡ä»¶æ“ä½œå®Œæˆåï¼Œå¯ä»¥å•å‡»Dismount AllæŒ‰é’®å¸è½½è¯¥å·ã€‚


### uninstall Truecrypt
using root access
``truecrypt-uninstall.sh``



Downloading and Installing
Version
Weâ€™ll be installing the â€œconsole-onlyâ€ version of TrueCrypt for Linux. There are 32 and 64 bit versions available, so choose the correct one depending on your system. If you are unsure run:

file /sbin/init
And the beginning of the output will be (for 64-bit) something like:

/sbin/init: ELF 64-bit LSB shared object
or for 32-bit:

/sbin/init: ELF 32-bit LSB shared object
The official website does not provide links for specific installations, seeming to force you to choose your version through a .php post form, but you can in fact download the tar directly with a wget command. At the time of writing, to download the 64-bit console only version, run:

sudo wget http://truecrypt.org/download/truecrypt-7.1a-linux-console-x64.tar.gz
Check that 7.1a is still the current version before you download (see http://truecrypt.org/downloads where the heading currently reads: Latest Stable Version - 7.1a), and substitute the version number in the command if there is a later one. Simply change the x64 to x32 in the command to download the 32-bit version.

Extract
To extract the setup file, run

tar xfvz truecrypt-7.1a-linux-console-x64.tar.gz
Again substituting the version number and architecture type if necessary. Donâ€™t worry about where to extract it to: anywhere is fine as the installer will handle the installation path automatically.

Install
Again substituting the version and architecture (last time, I promise), run:

./truecrypt-7.1a-linux-console-x64.tar.gz
And youâ€™ll be guided through the installation. At first, you should see:

TrueCrypt 7.1a Setup
____________________


Installation options:

 1) Install truecrypt_7.1a_console_amd64.tar.gz

 2) Extract package file truecrypt_7.1a_console_amd64.tar.gz and place it to /tmp

To select, enter 1 or 2:
Enter 1, and then press Enter to read the terms and conditions. Hold down your Space key for a while, if, like most people, you are not actually intent on reading them. (Enter will also work, but Space goes page by page instead of line by line).

Type y to accept the terms, and then press Enter. Youâ€™ll be told about the prerequisites.

Requirements for Running TrueCrypt:
FUSE library and tools
device mapper tools
Press Enter to continue.

Which should already be installed on Ubuntu and Debian systems.

Now youâ€™ll see a message about how to uninstall TrueCrypt (The words â€œUninstalling TrueCryptâ€ may be a bit misleading â€“ but donâ€™t worry, theyâ€™re just instructions for how to uninstall should you want to do so). Press Enter to exit the installer. TrueCrypt is now installed on your system.

Usage
create a volume
To interactively create a new encrypted volume, use the command:

truecrypt -c /path/to/volume/directory/volumename
For example, to create a new volume called â€œmysecretsâ€ in your home directory, run

truecrypt -c /home/mysecrets
Note that the â€œmysecretsâ€ will be created â€“ it should not be an existing file. You can use any file extension that you want or omit it. Note that TrueCrypt will not create the subpath, so make sure the full subpath exists (in this example, /home/) and that the file does not (in this example, mysecrets)

Youâ€™ll be asked whether you want to create a â€œNormalâ€ volume or a â€œHiddenâ€ one. In this example, weâ€™ll be creating a â€œNormalâ€ one. A Hidden volume is in essence two TrueCrypt volumes inside each other. These are very useful if someone uses physical force or blackmail to make you open a TrueCrypt volume or give them your password. With a hidden volume, you can pretend to comply, while in reality only giving them access to the outer volume. This is unlikely to be an issue for the average user.

Enter 1 to create a normal volume, and choose a size. e.g., enter:

100M
To create a volume of 100 Megabytes. Use, for example, 5G to create a 5 Gigabyte volume, or 100K to create a 100 Kilabyte volume. Think of this volume as a separate storage device, such as a flash drive: whatever size you assign in this step will be its fixed capacity. The larger it is, the longer it will take to create, as it needs to encrypt the entire volume before use, though this isnâ€™t a huge factor as, on my system, creating a volume of 1GB only took a couple of seconds. If you just want to store a few text files (for example, I store all my passwords in a text file inside a TrueCrypt volume) then a few MB will be more than adequate. You cannot create a volume bigger than your storage capacity.

Pick an encryption method. Weâ€™ll go with entering 1 again, to have our volume encrypted by AES, and 1 for the next input as well to choose RIPEMD-160 as our hashing algorithm. Any of the three encryption methods and hashing methods is sufficient. For the slightly paranoid, there are options such as Serpent-Twofish-AES which encrypts the volume using AES, encrypts the output of this (with a different key) with Twofish, and the output of this with Serpent. This means that if any of the three encryption methods is â€œbrokenâ€ (that is, a way is found to easily decrypt without the key), then your volume is still safe (unless all three are â€œbrokenâ€). Each of the three encryption methods has an article on Wikipedia, so have a look at these to see the latest attack attempts against each. All seem secure for the time being.

You can then pick from a number of file systems. Pick FAT (2) for the best compatibility, if you intend on accessing the volume from other systems. Now pick a password â€“ remember that brute-forcing the password is the only vaguely feasible way for other people to access your files, so pick a long password (recommended more than 20 characters) for security. For this demo weâ€™ll go with 1234 as a password. Donâ€™t try this at home.

Enter 1234, confirm with another Enter that youâ€™re happy with the password of fewer than 20 characters, and re-enter it for confirmation. Youâ€™ll now be prompted for a keyfile path. In this example we will not be using a keyfile, which means that we can access our volume in the future using just the password. Keyfiles are more secure than passwords. You can pick an image, a text file, or any other file you want, and youâ€™ll have to use this file every time you want to access your volume. While this is much more secure than a regular password, it does mean that if you ever lose you keyfile or if it becomes corrupted, you will no longer be able to access your TrueCrypt volume (see here for more about keyfiles and how to use them).

Now for the fun bit. Mash your keyboard as randomly as possible, entering at least 320 characters. TrueCrypt will use this to create Entropy. Humans are generally terrible at doing anything random â€“ remember to include as many different keys as possible. You can read about the random number generator method used here.

Press Enter and your volume will have been created.

mounting a volume
To mount it, use the command:

truecrypt --mount /home/secret
Press Enter to accept the default mount directory (on Ubuntu /media/truecrypt1/), enter your password, and press Enter twice more for the other defaults (no key file, no protect hidden volume).

Your encrypted volume is now mounted. Just like a mounted flash drive, you can copy files to and from it while it is mounted, but after dismount they are inaccessible. Move files to your volume with commands such as:

mv secrettextfile.txt /media/truecrypt1/
dismounting a volume
To dismount the volume use:

truecrypt -d
Which will dismount all mounted volumes. If you get the error

Error: umount: /media/truecrypt1: device is busy.
        (In some cases useful info about processes that use
         the device is found by lsof(8) or fuser(1))
Then it is very likely that it is simply your terminal that is keeping the device busy. If you have your terminal open in the location of your volume, change out with

cd ..
And run truecrypt -d again.

Further Information
The documentation and tutorials on the official site are exceptionally well-written, clear, and extensive, and they should give you step by step instructions as to all of TrueCryptâ€™s more advanced uses, should you need them.
