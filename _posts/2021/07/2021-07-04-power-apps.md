---
title: "从Power Apps认识「数据连接器」"
date: 2021-07-04
permalink: /2021-07-04-power-apps/
categories: ["实战分享"]
---

[bookmark](https://powerapps.microsoft.com/zh-cn/)


## 什么是PowerApps连接器


Power Apps是微软的低码平台，和腾讯云的lowcode非常像。


Power Apps的数据来自2部分：连接器+数据源。这个和腾讯云低码平台有区别，低码平台没有单独抽象出「连接器」的概念，只有数据源。


## 如何使用连接器？


Power APPs定义了2种连接器：官方内置的连接器、自定义链接。

1. 对于官方的连接，支持各种常见的服务，比如连接到google在线表格。同理，低码也可以和腾讯文档那边打配合，但前提是有连接器。
2. 对于自定义连接，数据源芳需要按照规范提供rest api，以及至少支持某种身份验证机制。这个可以看作对官方连接的补充，提供自定义能力，用户可以接入任何符合规范的后端服务接口。

可以看到，在数据源中，可以使用官方的连接器连接到google excel。


![Untitled.png](https://raw.githubusercontent.com/dongyuanxin/static/main/blog/imgs/2021-07-04-power-apps/a2400ad53872276f5a468dedecb708f0.png)


被连接的Google Excel Online中，会新增一列 power apps id，说明这条数据已经被power apps所使用。


## 为什么需要连接器？


连接器降低了用户使用各个业务能力的门槛，打通了和其它平台之间的数据互通，设计上比微搭单纯的数据源更优秀，具有横向扩展性；自定义连接器是连接器的补充。


> 为什么说「连接器+数据源」比单独的数据源更优秀？

1. 支持第三方，任何系统都可以作为数据源，只需要按照规范接入连接器即可
2. 内置的连接器能解决大部分数据场景

横向来看，和腾讯云的鹊桥系统相似，能打通其它平台数据，通过统一的协议，将数据接入到系统中。


纵向来看，google在线文档的连接器，在操作上直接在前端授权；自定义连接器要支持身份认证。


## 连接器实现原理？


根据文档以及产品交互，配合newtwork抓包能猜出连接器的服务设计逻辑：

- 给连接器授权时，连接器会保存身份信息、表数据等核心metadata，用于之后的鉴权逻辑
- 连接器作为独立业务模块，对前端编辑器、低代码应用提供访问路由，前端可以在各种工具中（例如JS SDK）通过此路由操作数据源
- 连机器解析前端传来的DSL语法，配合第1步的metadata，进行鉴权和转发给数据源，并将结果返回给前端。

## 总结

1. （自定义）连接器的概念可以用于BFF编排中，作为打通其它业务方数据源的桥梁。
2. 实现上可以参考连接器的服务设计逻辑

