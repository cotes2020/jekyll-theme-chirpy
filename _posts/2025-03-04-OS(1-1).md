---
title: "[OS] Operating System(1-1): Interrupt, Oranizaion, Architecture"

categories: [CS, Operating System, OS]
tags:
  - [CS, OS, Interrupt]
toc: true
toc_sticky: true

date: 2025-03-04
last_modified_at: 2025-03-04
---
>ğŸ€ ìš´ì˜ì²´ì œ ì „ê³µ ìˆ˜ì—… ì •ë¦¬

## Operatrion System(OS)
<u><span style="color: #008000">ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë“¤ì„ ìœ ì €ë“¤ê³¼ ì‘ìš©í”„ë¡œê·¸ë¨ì„ í•˜ë“œì›¨ì–´ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì—­í• </span></u>

### Definition of OS
---
* ë³´ëŠ” ê´€ì ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ (ì‚¬ìš©ì <-> ê°œë°œì)
* ìš´ì˜ì²´ì œê°€ ìˆëŠ” ì´ìœ : í•˜ë‚˜ ì»´í“¨í„°ë§ˆë‹¤ í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ë§Œ ì‘ë™í•˜ì§€ ì•ŠìŒ.  
  - ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì„ í•˜ë“œì›¨ì–´ ê°™ì€ ì¸í”„ë¼ë¥¼ ê°€ì§€ê³  íš¨ìœ¨ì ìœ¼ë¡œ ëŒë¦¬ê¸°ìœ„í•´ ìš´ì˜ì²´ì œê°€ í•„ìš”. 
  - ì‘ì€ ë©”ëª¨ë¦¬(RAM)ë§Œ ê°€ì§€ê³ ë„ ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì„ ëŒë¦´ ìˆ˜ ìˆìŒ.
* Mobile devices like smartphones and tablets are resource poor,  optimized for usability and battery life
  : ëª¨ë°”ì¼ì€ ì„±ëŠ¥ì´ ë” ì‘ìœ¼ë‹ˆ resource poor í•˜ê³ , ë°°í„°ë¦¬ë¥¼ ì˜ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ìš´ì˜ì²´ì œê°€ ì—¬ê¸°ì— ë§ì¶° ê°œë°œë¨.
* ì‹¬ì§€ì–´ ê°€ì „ì œí’ˆ ë“±ì—ë„ CPUê°€ ìˆê³  OSë„ ìˆìŒ. OSì˜ ì‹œë°œì ì€ êµ°ì‚¬ìš©ì´ì—ˆìŒ.
 
### Concept of OS
---
1. No universally accepted definition
2. â€œThe one program **running at all times** on the computerâ€is the <u><span style="color: #008000">kernel</span></u>, part of the operating system
3. ê·¸ì™¸ ë‚˜ë¨¸ì§€ëŠ” system program(ships with the os, but not part of the kernel) ë˜ëŠ” 
   application program(all programs not associated with os)ì´ë‹¤.
4. middle ware: ê°œë°œìë“¤ì„ ìœ„í•´ APIë¥¼ ì œê³µí•´ì£¼ëŠ” ê³„ì¸µ, ì‚¬ìš©ìë“¤ì´ ë³´ëŠ” ê²ƒë³´ë‹¤ ì¶”ìƒí™”ë˜ì–´ ìˆìŒ. ì˜ˆì‹œ: ì¿¼ë¦¬ ë“±

![Computer System Organization](../assets/img/OS/Computer_OS.png)
>Computer System Organization

* ê°ê° **system bus**ë¡œ ì—°ê²°ë˜ì–´ ìˆê³ , ì´ë¥¼ í†µí•´ ë‹¤ ì—°ê²°ì´ ë˜ì–´ ë™ì‹œì—(**<span style="color: #008000">Concurrent</span>**) ìš´ì˜ì´ ëœë‹¤. 
* Concurrent ê³¼ì •ì—ì„œ ì¶©ëŒì€ í”¼í•  ìˆ˜ ì—†ë‹¤. íŠ¹íˆ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•  ê²½ìš°ì— ì¶©ëŒì€ ë¹ˆë²ˆí•´ì„œ ë©”ëª¨ë¦¬ ì ‘ê·¼ì€ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ìŒ.  
* I/O devices and the CPU can execute **<span style="color: #008000">Concurrently</span>**
* **Local Buffer** ëŠ” I/O deviceë¥¼ ì œì–´í•˜ê¸°ìœ„í•œ <u>ì»¨íŠ¸ë¡¤ëŸ¬</u> ì´ë‹¤. 
  * í•¨ìˆ˜ ë˜ëŠ” íŠ¹ì • ì½”ë“œ ë¸”ë¡ ë‚´ì—ì„œ ì„ ì–¸ëœ ì„ì‹œ ì €ì¥ ê³µê°„ìœ¼ë¡œ, ìŠ¤íƒ(stack) ë©”ëª¨ë¦¬ì— ì €ì¥ë¨.  
* Each device controller type has an operating system **<span style="color: #008000">device driver</span>** to manage it
* CPU moves data from/to main memory to/from local buffers. (ì»´í“¨í„° ì‹œìŠ¤í…œì—ì„œ ì–´ë–¤ ê³„ì‚°ì´ë“  CPUë¥¼ í†µí•´ì„œ ì´ë£¨ì–´ ì§„ë‹¤. ë°ì´í„°ì˜ ì´ë™ì¡°ì°¨.)
* Device controller informs CPU that it has finished its operation by causing an **interrupt**.

{:.prompt-warning}
>ê·¸ëŸ¼ CPUë“¤ì´ ëª¨ë“  ì¼ì— ì–´ë–»ê²Œ ê´€ì—¬í•˜ëŠ”ê°€??
>

ê·¸ê±¸ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ”ê²Œ **Interrupt** ì´ë‹¤.

## Interrupt
---
* InterruptëŠ” 'ë°©í•´í•˜ë‹¤'ë¼ëŠ” ëœ»ì²˜ëŸ¼ CPUê°€ í•˜ëŠ” í–‰ìœ„ë¥¼ ë°©í•´í•´ì„œ ì—¬ëŸ¬ ê°œì˜ ì¼ì„ í•  ìˆ˜ ìˆë„ë¡ í•¨.

### Function of Interrupt
---
* Interrupt transfers control to the interrupt service routine generally,  
  through the interrupt vector, which contains the addresses of all the service routines
  * ì–´ë–¤ ì‚¬ê±´ì´ ë°œìƒí•œ ê²ƒì„ ì•Œë ¤ì£¼ê¸° ìœ„í•´ CPUë¥¼ ê°‘ìê¸° ì¤‘ë‹¨ì„ ì‹œí‚´.
    ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì´ë©´ ë§ˆìš°ìŠ¤I/Oì—ì„œ CPUì— interruptë¥¼ ê²€.  
    ê·¸ëŸ¼ CPUê°€ ë©ˆì¶”ê³  ë³€ê²½ëœ ê²ƒì„ ë°˜ì˜. ì´ ê³¼ì •ì˜ <u>ì½”ë“œ</u> ê°€ **<span style="color: #008000">interrupt service routines</span>** ì´ë‹¤. 
* ë””ë°”ì´ìŠ¤ë§ˆë‹¤ interruptê°€ ìˆëŠ”ë°, ê° interruptë¥¼ êµ¬ë³„í•˜ê¸° ìœ„í•´ **interrupt vector** ê°€ ìˆë‹¤.(ì¦‰, interruptì˜ index ì—­í• )
* A **trap** or **exception** is a <u>software-generated interrupt</u>.
* OS is **interrupt driven**.
  * interruptì˜ ì¢…ë¥˜ê°€ ë„ˆë¬´ ë§ì•„ì„œ ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤.
    vectorì—ì„œ ë²ˆí˜¸ê°€ í•˜ë‚˜ë§Œ ì£¼ì–´ì§€ëŠ” ê²Œ ì•„ë‹ˆë¼, ê·¸ ì£¼ì†Œì˜ tableì´ ë˜ ìˆë‹¤.(ex: ì™¸ê³¼ì—ë„ ì…©í˜•ì™¸ê³¼, ì¼ë°˜ì™¸ê³¼ ìˆëŠ” ê²ƒì²˜ëŸ¼)

#### CPUê°€ interruptê°€ ê±¸ë¦°ì§€ ì–´ë–»ê²Œ ì•„ëŠ”ê°€?
- The CPU hardware has a wire called the **<span style="color: #008000">interrupt-request line</span>** that the CPU **senses** after executing every instruction.
(interruptëŠ” ëŒ€ëµ 1ì´ˆì— 2ì²œë²ˆ ì •ë„ ì´ë£¨ì–´ ì§„ë‹¤.)

![interrupt_timeline](../assets/img/OS/interrupt_timeline.png)
>interrupt_timeline
### Interrupt Handling
---
* CPUê°€ interruptê°€ ê±¸ë¦¬ë©´ ì‹¤í–‰í•˜ë˜ ì½”ë“œë¥¼ ë©ˆì¶”ê³  ë‹¤ë¥¸ ì½”ë“œë¥¼ ì‹¤í–‰í•¨.  
  ê·¸ë¦¬ê³  ì›ë˜ì˜ ìƒíƒœë¡œ ëŒì•„ê°€ê¸° ìœ„í•´ **registers** (ì–´ëŠ í•˜ë‚˜ì˜ registerê°€ ì•„ë‹ˆë¼ resgisterì˜ ì§‘í•©)ë¥¼ ì €ì¥í•¨.

#### interrupt ë°©ì‹.
1. **<span style="color: #008000">polled</span>** interrupt system
  - interruptê°€ ì˜¤ë©´ í™•ì¸í•˜ëŠ” ë°©ì‹
2. **<span style="color: #008000">vectored</span>** interrupt system
  - interruptì— ë²ˆí˜¸ê°€ ë”°ë¼ì˜¤ëŠ” ë°©ì‹(ëŒ€ë¶€ë¶„ vector ì‚¬ìš©)

#### Two interrupt request line
1. **<span style="color: #008000">nonmaskable interrupt</span>**: unrecoverable errors(ë¬´ì¡°ê±´ ê±¸ë¦¬ëŠ” interrupt)
2. **<span style="color: #008000">maskable interrupt</span>**: can be turned off(ì•ˆë°›ì•„ë„ ë˜ëŠ” interrupt)

* **Interrupt chaining**: each element in the interrupt vector points to the head of a list of interrupt handlers.
  - vectorì˜ í¬ê¸°ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.
* interruptì˜ <u>ìš°ì„ ìˆœìœ„</u>ê°€ ìˆëŠ”ë° **interrupt priority level** ì´ë¼ í•˜ê³  ìš°ì„ ìˆœìœ„ëŒ€ë¡œ ì‹¤í–‰ë¨.

![alt text](../assets/img/OS/interrupt_sensing.png)
>Interrupt-drive I/O Cycle
instructionì¤‘ì— sensingì„ í†µí•´ interrput ì—¬ë¶€ í™•ì¸
interruptëŠ” OSì˜ multitaskingë“±ì„ ì´í•´í•˜ê¸° ìœ„í•œ ê¸°ì´ˆ

## Storage Structure
---
* main memory: only large storage media that the CPU can access <u>directly</u>
  - **Random access**
  - Typically **volatile(íœ˜ë°œì„±)**
  - Typically **random-access memory** in the form of **Dynamic Random-access Memory(DRAM)**
* Secondary storage: extension of main memory that provides large **<span style="color: #008000">nonvolatile(ë¹„íœ˜ë°œì„±)</span>** storage capacity
  1. HDD(Hard Disk Drives): logically divided into **tracks**, which are subdivided into **sectors**
  2. NVM(Non-volatile memory) devices = SSD: faster than hard disk, Nonvolatile, Varios technologies, Becoming more popular(as capacity and performance increases, price drops).
  
### Storage Definitions and Notation
---
* bit: The basic unit of computer storage.
* byte: Is 8bits, the smallest convenient chunk of storage
* word: size of CPU's register(ex: 1word = 8byte in 64bits CPU)
(octec = 8 bit = 1 byte)

### Stroage Hierarchy
---
Storage systems organized in hierarchy(ê³„ì¸µ êµ¬ì¡°)
1. speed: program
2. cost
3. volatility
   
* **Caching**: copying information into faster storage system
  * Main memory can be viewed as a cache for secondary storage
*  **Device Driver**: For each device controller to manage I/O
   * Provides <span style="color: #008000">uniform interface</span> b/w controller and kernel

![alt text](../assets/img/OS/Storage_device.png)
>Storage-Device Hierarchy

register, cacheëŠ” CPUì•ˆì— ë‚´ì¥ë˜ì–´ìˆê³  ê°€ì¥ ë¹ ë¥´ê³  ìš©ëŸ‰ì´ ì ìœ¼ë©° ë¹„ìŒˆ.
ë°‘ìœ¼ë¡œ ê°ˆìˆ˜ë¡ ìš©ëŸ‰ì´ í¬ê³  ëŠë¦¬ë©° ê°€ê²©ì´ ìŒˆ.

![alt text](../assets/img/OS/MCW.png)
>Working of Modern Computer 

#### DMA(direct memory access)
---
1. Used for high-speed I/O devices
2. Device controller transfers blocks of data **with out CPU intervention** (CPUì˜ ë¶€í•˜ë¥¼ ì¤„ì„) 
  * í° ë°ì´í„°ë¥¼ CPUê°€ ì²˜ë¦¬í•˜ë ¤ë©´ í•˜ë‚˜ì”© ì˜®ê²¨ì„œ ì˜¤ë˜ê±¸ë¦¬ê¸° ë•Œë¬¸ì— CPUê°€ ëª¨ë‘ ê´€ì—¬í•˜ì§€ ì•Šê³  ì‹œì‘ê³¼ ëë§Œ ê´€ì—¬í•¨
3. Only one interrupt is generated **per block**, not per byte

## Computer-System Architecture
---
* Most systems use a **single general-purpose** processor
  * Most systems have **special-purpose processors** as well
* **<span style="color: #008000">Multiprocessors</span>** systems growing in use and importance
  * Known as **parallel systems(ë³‘ë ¬ ì‹œìŠ¤í…œ), tightly-coupled systems(ë°€ê²°í•© ì‹œìŠ¤í…œ)**
  
âœ…Advantages of Multiprocessor:
  1. Increased throughput(ì²˜ë¦¬ëŸ‰) - ì‘ì—…ì„ ë” ë¹ ë¥´ê²Œ ì²˜ë¦¬ ê°€ëŠ¥
  2. Economy of scale
  3. Increased reliability: ì¼ë¶€ í”„ë¡œì„¸ì„œê°€ ê³„ì† ì‘ë™í•˜ì—¬ ì‹œìŠ¤í…œì´ ì™„ì „íˆ ì¤‘ë‹¨ë˜ì§€ ì•ŠìŒ.

ğŸ“Types of Multiprocessor:
  1. Asymmetric Multiprocessing(ë¹„ëŒ€ì¹­ ë‹¤ì¤‘ì²˜ë¦¬) - each processor is assigned a specific task
  2. Symmetric Multiprocessing(ëŒ€ì¹­ ë‹¤ì¤‘ì²˜ë¦¬) - each processor performs all tasks

### Symmetric Multiprocessing Architecture
#### Multiple Cores on a Single Chip
---
![alt text](../assets/img/OS/Symmetric_Multiprocessing.png)
>Symmetric Multiprocessing Architecture

* Multiple single-core chip
  * ë‘ ê°œì˜ ê°œë³„ í”„ë¡œì„¸ì„œê°€ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì—ì„œ ë™ì‘í•˜ë©°, ë³‘ë ¬ ì²˜ë¦¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚´.

#### Multi-chip and Multicore Systems
---
![alt text](../assets/img/OS/Dual-Core.png)
>Dual-Core Design
* Multi-chip and **multicore**
* Systems containing all chips
  * Chassis containing multiple separate systems(í•˜ë‚˜ì˜ ë¬¼ë¦¬ì  ì¥ì¹˜ ë‚´ì— ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ ì»´í“¨í„° ì‹œìŠ¤í…œì´ ì¡´ì¬í•˜ëŠ” í˜•íƒœ)

### NUMA System
---
![alt text](../assets/img/OS/NUMA.png)

* ì—¬ëŸ¬ ê°œì˜ CPUê°€ ê°ê° ë…ë¦½ì ì¸ ë©”ëª¨ë¦¬(memory) ì˜ì—­ì„ ê°€ì§€ë©°, ë‹¤ë¥¸ CPUì˜ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•  ìˆ˜ë„ ìˆëŠ” êµ¬ì¡°
* CPU ê°„ ë°ì´í„°ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë„ë¡ **Interconnect(ì—°ê²°ë§)** ì´ ì¡´ì¬
* Scalability(í™•ì¥ì„±)ì´ ë›°ì–´ë‚˜ì§€ë§Œ **ì›ê²© ë©”ëª¨ë¦¬ ì ‘ê·¼ì€ ì„±ëŠ¥ ì €í•˜** ë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŒ
* ex: Server, Data Center etc

### Clustered Systems
---
![alt text](../assets/img/OS/Clustered_Systems.png)
>Clustered Systems

* **Multiple systems** working together  
  (ì¦‰, ì—¬ëŸ¬ ëŒ€ì˜ ì»´í“¨í„°ê°€ í•˜ë‚˜ì˜ ë„¤íŠ¸ì›Œí¬ë¡œ ì—°ê²°ë˜ì–´ ê³µë™ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹)

âœ…Features of Clustered Systems
1. **Storage Sharing**
  * ì¼ë°˜ì ìœ¼ë¡œ **Storage Area Network(SAN)**ë¥¼ í†µí•´ ì—¬ëŸ¬ ì‹œìŠ¤í…œì´ ë™ì¼í•œ ì €ì¥ì†Œë¥¼ ê³µìœ í•¨
  * ë°ì´í„° ì¼ê´€ì„± ìœ ì§€ ê°€ëŠ¥
2. Provides a **High Availability**
  * ì‹œìŠ¤í…œ ì¥ì•  ë°œìƒ ì‹œ ë‹¤ë¥¸ ë…¸ë“œê°€ ëŒ€ì‹  ì‘ì—…ì„ ìˆ˜í–‰í•˜ì—¬ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ì„ ë°©ì§€.
  * **Asymmetric Clustering has one machine in <span style="color: #008000">hot-standby mode</span>**
  * **Symmetric Clustering has multiple nodes running applications, monitoring each other**
3. Some clutsers are for **High-Performance Computing(HPC)**
  * App must be written to use **<span style="color: #008000">parallelizaion(ë³‘ë ¬ ì²˜ë¦¬)</span>**
4. **Distributed Lock Manager(DLM)**
  * DLM to avoid conflicting operations on shared storage
  * ë°ì´í„° ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ê³ , ë™ì‹œ ì ‘ê·¼ ë¬¸ì œë¥¼ ë°©ì§€