<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a .NET Core Visual Studio Template | Programming With Wolfgang</title><meta name="generator" content="Jekyll v4.1.0" /><meta property="og:title" content="Create a .NET Core Visual Studio Template" /><meta name="author" content="Wolfgang Ofner" /><meta property="og:locale" content="en_US" /><meta name="description" content="Over the last couple of weeks, I created several microservices with the same project structure. Setting up a new solution was quite repetitive, time-consuming, and no to be honest no fun. Since my solutions have the same structure, I created a Visual Studio template that sets up everything for me. Today, I want to show you how to create your Visual Studio template with ASP .Net MVC with .NET Core 3.1 and Docker." /><meta property="og:description" content="Over the last couple of weeks, I created several microservices with the same project structure. Setting up a new solution was quite repetitive, time-consuming, and no to be honest no fun. Since my solutions have the same structure, I created a Visual Studio template that sets up everything for me. Today, I want to show you how to create your Visual Studio template with ASP .Net MVC with .NET Core 3.1 and Docker." /><meta property="og:site_name" content="Programming With Wolfgang" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-07-27T19:18:58+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Create a .NET Core Visual Studio Template" /><meta name="twitter:site" content="@wolfgang_ofner" /><meta name="twitter:creator" content="@Wolfgang Ofner" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"url":"/create-a-net-core-visual-studio-template/","@type":"BlogPosting","headline":"Create a .NET Core Visual Studio Template","dateModified":"2020-07-27T19:18:58+02:00","datePublished":"2020-07-27T19:18:58+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"/create-a-net-core-visual-studio-template/"},"author":{"@type":"Person","name":"Wolfgang Ofner"},"description":"Over the last couple of weeks, I created several microservices with the same project structure. Setting up a new solution was quite repetitive, time-consuming, and no to be honest no fun. Since my solutions have the same structure, I created a Visual Studio template that sets up everything for me. Today, I want to show you how to create your Visual Studio template with ASP .Net MVC with .NET Core 3.1 and Docker.","@context":"https://schema.org"}</script><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <script src="/assets/js/post.min.js" async></script> <script async src="https://www.googletagmanager.com/gtag/js?id="></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); </script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/author/wolfgang-small.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Programming With Wolfgang</a></div><div class="site-subtitle font-italic">Let's talk programming</div></div></div><div class="d-flex justify-content-center"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel">Cancel</span></div><ul class="nav flex-column mt-3"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/wolfgangofner" target="_blank" > <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/wolfgang_ofner" target="_blank" > <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/wolfgangofner" target="_blank" > <i class="fab fa-linkedin"></i> </a> <a href=" javascript:window.open('mailto:' + ['wolfgang','programmingwithwolfgang.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Create a .NET Core Visual Studio Template</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Jul 27, 2020, 7:18 PM +0200" > Jul 27 <i class="unloaded">2020-07-27T19:18:58+02:00</i> </span> by <span class="author"> Wolfgang Ofner </span></div><div> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Oct 24, 2020, 2:51 PM +0200" > Oct 24 <i class="unloaded">2020-10-24T14:51:39+02:00</i> </span></div></div><div class="post-content"><p>Over the last couple of weeks, I created several microservices with the same project structure. Setting up a new solution was quite repetitive, time-consuming, and no to be honest no fun. Since my solutions have the same structure, I created a Visual Studio template that sets up everything for me. Today, I want to show you how to create your Visual Studio template with ASP .Net MVC with .NET Core 3.1 and Docker.</p><h2 id="creating-a-visual-studio-template">Creating a Visual Studio Template</h2><p>I plan to create a skeleton for my solution and when creating a new project with my template to take the user input as the name for the projects and the entities. For example, if the user names the solution Customer, I will create a Customer.Api, Customer.Service and Customer.Data project and also a Customer entity. You can find the code of the demo on <a href="https://github.com/WolfgangOfner/VisualStudioTemplate" target="_blank" rel="noopener noreferrer">GitHub</a>. Note that there are two branches.</p><h3 id="creating-the-structure-of-the-project-for-the-visual-studio-template">Creating the Structure of the Project for the Visual Studio Template</h3><p>The first step is to create the structure of your Visual Studio template. Therefore, I created an empty C# solution and add three projects, Template.Api, Template.Service and Template.Data. For the template, you can install any Nuget you want or add code. I added a controller that calls a service that calls a repository to get some data.</p><div id="attachment_2285" style="width: 271px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Visual-Studio-Template-Project-Structure.jpg"><img aria-describedby="caption-attachment-2285" loading="lazy" class="size-full wp-image-2285" src="/assets/img/posts/2020/07/Visual-Studio-Template-Project-Structure.jpg" alt="Visual Studio Template Project Structure" width="261" height="365" /></a><p id="caption-attachment-2285" class="wp-caption-text"> Visual Studio Template Project Structure</p></div><p>Additionally, I added Swagger to have a UI to test the Api method. When you are satisfied with your project, run it. You should see the Swagger UI now.</p><div id="attachment_2286" style="width: 378px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/The-Swagger-UI-for-the-template.jpg"><img aria-describedby="caption-attachment-2286" loading="lazy" class="size-full wp-image-2286" src="/assets/img/posts/2020/07/The-Swagger-UI-for-the-template.jpg" alt="The Swagger UI for the template" width="368" height="426" /></a><p id="caption-attachment-2286" class="wp-caption-text"> The Swagger UI for the template</p></div><p>As the last step, I test the Get method to verify that everything works correctly.</p><div id="attachment_2287" style="width: 710px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Testing-the-Template-Api.jpg"><img aria-describedby="caption-attachment-2287" loading="lazy" class="wp-image-2287" src="/assets/img/posts/2020/07/Testing-the-Template-Api.jpg" alt="Testing the Template Api" width="700" height="712" /></a><p id="caption-attachment-2287" class="wp-caption-text"> Testing the Template Api</p></div><p>The template is set up and as the next step, I am going to export it and install it in Visual Studio.</p><h3 id="export-the-template">Export the Template</h3><p>To export the Visual Studio Template, click on Project and then Export Template.</p><div id="attachment_2288" style="width: 361px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Export-the-Visual-Studio-Template.jpg"><img aria-describedby="caption-attachment-2288" loading="lazy" class="size-full wp-image-2288" src="/assets/img/posts/2020/07/Export-the-Visual-Studio-Template.jpg" alt="Export the Visual Studio Template" width="351" height="548" /></a><p id="caption-attachment-2288" class="wp-caption-text"> Export the Visual Studio Template</p></div><p>This opens a new window in which you can select what template you want to export and which project. Leave it as Project template, select the Template.Api project and click on Next.</p><div id="attachment_2289" style="width: 725px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Choose-which-Project-to-export.jpg"><img aria-describedby="caption-attachment-2289" loading="lazy" class="size-full wp-image-2289" src="/assets/img/posts/2020/07/Choose-which-Project-to-export.jpg" alt="Choose which Project to export" width="715" height="566" /></a><p id="caption-attachment-2289" class="wp-caption-text"> Choose which Project to export</p></div><p>On the last page of the export, uncheck both checkboxes and click Finish.</p><div id="attachment_2290" style="width: 710px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Finish-the-Export.jpg"><img aria-describedby="caption-attachment-2290" loading="lazy" class="wp-image-2290" src="/assets/img/posts/2020/07/Finish-the-Export.jpg" alt="Finish the Export" width="700" height="556" /></a><p id="caption-attachment-2290" class="wp-caption-text"> Finish the Export</p></div><p>Repeat this export for all other projects in your solution. After you are finished, you can find the exported files under C:\Users&lt;YourUserName&gt;\Documents\Visual Studio <YourVersion>\My Exported Templates.</YourVersion></p><div id="attachment_2291" style="width: 629px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/The-exported-.zip-files.jpg"><img aria-describedby="caption-attachment-2291" loading="lazy" class="size-full wp-image-2291" src="/assets/img/posts/2020/07/The-exported-.zip-files.jpg" alt="The exported .zip files" width="619" height="140" /></a><p id="caption-attachment-2291" class="wp-caption-text"> The exported .zip files</p></div><p>Unzip every zip file into a separate folder and delete the zip files. I get quite often a warning that the file header is corrupt during the unzip. You can ignore this message though. Next, create a file with a vstemplate ending, for example, Template.vstemplate in the folder where you unzipped your templates. This file contains links to all projects in the template in the XML format. Copy the following code into the file:</p><div class="language-xml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="nt">&lt;VSTemplate</span> <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/developer/vstemplate/2005"</span> <span class="na">Version=</span><span class="s">"2.0.0"</span> <span class="na">Type=</span><span class="s">"ProjectGroup"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;TemplateData&gt;</span>
      <span class="nt">&lt;Name&gt;</span>My Template<span class="nt">&lt;/Name&gt;</span>
      <span class="nt">&lt;Description&gt;</span>A template with a three tier architecture.<span class="nt">&lt;/Description&gt;</span>
      <span class="nt">&lt;ProjectType&gt;</span>CSharp<span class="nt">&lt;/ProjectType&gt;</span>
   <span class="nt">&lt;/TemplateData&gt;</span>
   <span class="nt">&lt;TemplateContent&gt;</span>
      <span class="nt">&lt;ProjectCollection&gt;</span>
         <span class="nt">&lt;ProjectTemplateLink</span> <span class="na">ProjectName=</span><span class="s">" Template.Api"</span> <span class="na">CopyParameters=</span><span class="s">"true"</span><span class="nt">&gt;</span>Template.Api\MyTemplate.vstemplate<span class="nt">&lt;/ProjectTemplateLink&gt;</span>
         <span class="nt">&lt;ProjectTemplateLink</span> <span class="na">ProjectName=</span><span class="s">" Template.Service"</span> <span class="na">CopyParameters=</span><span class="s">"true"</span><span class="nt">&gt;</span>Template.Service\MyTemplate.vstemplate<span class="nt">&lt;/ProjectTemplateLink&gt;</span>
         <span class="nt">&lt;ProjectTemplateLink</span> <span class="na">ProjectName=</span><span class="s">"Template.Data"</span> <span class="na">CopyParameters=</span><span class="s">"true"</span><span class="nt">&gt;</span>Template.Data\MyTemplate.vstemplate<span class="nt">&lt;/ProjectTemplateLink&gt;</span>
      <span class="nt">&lt;/ProjectCollection&gt;</span>
   <span class="nt">&lt;/TemplateContent&gt;</span>
<span class="nt">&lt;/VSTemplate&gt;</span>
</pre></table></code></div></div><p>Save the file and create a zip of the three folder and the template file. You can easily do this by highlighting everything and the right-click and then select Send to –&gt; Compressed (zipped) folder. Your folder should contain the following files and directories now:</p><div id="attachment_2292" style="width: 632px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Content-of-the-template-folder-after-finishing-the-creation-of-the-template.jpg"><img aria-describedby="caption-attachment-2292" loading="lazy" class="size-full wp-image-2292" src="/assets/img/posts/2020/07/Content-of-the-template-folder-after-finishing-the-creation-of-the-template.jpg" alt="Content of the template folder after finishing the creation of the template" width="622" height="180" /></a><p id="caption-attachment-2292" class="wp-caption-text"> Content of the template folder after finishing the creation of the template</p></div><h3 id="install-the-visual-studio-template">Install the Visual Studio Template</h3><p>To install the template, all you have to do is to copy the Template.zip file into the following folder: C:\Users&lt;YourNameUser&gt;\Documents\Visual Studio <YourVersion>\Templates\ProjectTemplates\Visual C#. Alternatively, you could copy the file into the ProjectTemplates folder.</YourVersion></p><h3 id="testing-the-new-template">Testing the new Template</h3><p>Open Visual Studio and select Create a new project. Search for My Template and the previously added template will be displayed.</p><div id="attachment_2293" style="width: 574px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Select-your-template-in-Visual-Studio.jpg"><img aria-describedby="caption-attachment-2293" loading="lazy" class="size-full wp-image-2293" src="/assets/img/posts/2020/07/Select-your-template-in-Visual-Studio.jpg" alt="Select your template in Visual Studio" width="564" height="167" /></a><p id="caption-attachment-2293" class="wp-caption-text"> Select your template in Visual Studio</p></div><p>Create the project and you will see the same structure as in the template. When you start the project, you will see the Swagger UI and can test the Api methods.</p><h2 id="make-the-template-flexible-with-variables">Make the Template flexible with Variables</h2><p>Having a template is nice but it would be even nicer if the projects weren’t named Template and if they would take the name I provide. To achieve this, Visual Studio offers template parameters. You can find all available parameters <a href="https://docs.microsoft.com/en-us/visualstudio/ide/template-parameters?view=vs-2019" target="_blank" rel="noopener noreferrer">here</a>. The goal is to name the projects and files accordingly to the user input during the creation of the solution. To do this, I use the variable safeprojectname. This variable gives you the name of the current project. To get the name of the solution prefix it with ext_, therefore I will use ext_safeprojectname. All variables have a Dollar sign at the beginning and the end.</p><h3 id="replace-class-names-and-namespaces-with-variables">Replace Class Names and Namespaces with Variables</h3><p>I am replacing in all files Template with $ext_safeprojectname$, for example, the TemplateService class:</p><div class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">using</span> <span class="err">$</span><span class="nn">ext_safeprojectname</span><span class="err">$</span><span class="p">.</span><span class="n">Data</span><span class="p">;</span>

<span class="k">namespace</span> <span class="err">$</span><span class="nn">ext_safeprojectname</span><span class="err">$</span><span class="p">.</span><span class="n">Service</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="err">$</span><span class="nc">ext_safeprojectname</span><span class="err">$</span><span class="n">Service</span> <span class="p">:</span> <span class="n">I</span><span class="err">$</span><span class="n">ext_safeprojectname</span><span class="err">$</span><span class="n">Service</span>
    <span class="p">{</span>
        <span class="k">private</span> <span class="k">readonly</span> <span class="n">I</span><span class="err">$</span><span class="n">ext_safeprojectname</span><span class="err">$</span><span class="n">Repository</span> <span class="n">_repository</span><span class="p">;</span>

        <span class="k">public</span> <span class="err">$</span><span class="n">ext_safeprojectname</span><span class="err">$</span><span class="nf">Service</span><span class="p">(</span><span class="n">I</span><span class="err">$</span><span class="n">ext_safeprojectname</span><span class="err">$</span><span class="n">Repository</span> <span class="n">repository</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">_repository</span> <span class="p">=</span> <span class="n">repository</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="nf">GetAll</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">_repository</span><span class="p">.</span><span class="nf">GetAll</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span> 
</pre></table></code></div></div><p>Adding the variable also adds a lot of errors in your solution. You can ignore them though.</p><div id="attachment_2294" style="width: 710px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Errors-after-adding-the-template-variables.jpg"><img aria-describedby="caption-attachment-2294" loading="lazy" class="wp-image-2294" src="/assets/img/posts/2020/07/Errors-after-adding-the-template-variables.jpg" alt="Errors after adding the template variables" width="700" height="508" /></a><p id="caption-attachment-2294" class="wp-caption-text"> Errors after adding the template variables</p></div><h3 id="replace-file-names-with-variables">Replace File Names with Variables</h3><p>Not only class names and namespaces should have the provided name, but also the classes should be named accordingly. You can do the same as before and replace Template in all file names with $ext_safeprojectname$. You don’t have to change the project name though.</p><div id="attachment_2295" style="width: 308px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Replace-the-file-names-with-variables.jpg"><img aria-describedby="caption-attachment-2295" loading="lazy" class="size-full wp-image-2295" src="/assets/img/posts/2020/07/Replace-the-file-names-with-variables.jpg" alt="Replace the file names with variables" width="298" height="363" /></a><p id="caption-attachment-2295" class="wp-caption-text"> Replace the file names with variables</p></div><h3 id="export-the-template-1">Export the Template</h3><p>Repeat the export from before by clicking on Project –&gt; Export Template and export all your projects. Delete your previously created folders and unzipp the exported zip files. In the vstemplate file, replace Template with $safeprojectname$. This will rename the project files. Also make sure that CopyParameters=”true” is set for every project. Otherwise, the user input won’t be copied and the variables will be empty.</p><div class="language-xml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="nt">&lt;VSTemplate</span> <span class="na">xmlns=</span><span class="s">"http://schemas.microsoft.com/developer/vstemplate/2005"</span> <span class="na">Version=</span><span class="s">"2.0.0"</span> <span class="na">Type=</span><span class="s">"ProjectGroup"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;TemplateData&gt;</span>
      <span class="nt">&lt;Name&gt;</span>My Template<span class="nt">&lt;/Name&gt;</span>
      <span class="nt">&lt;Description&gt;</span>A template with a three tier architecture.<span class="nt">&lt;/Description&gt;</span>
      <span class="nt">&lt;ProjectType&gt;</span>CSharp<span class="nt">&lt;/ProjectType&gt;</span>
   <span class="nt">&lt;/TemplateData&gt;</span>
   <span class="nt">&lt;TemplateContent&gt;</span>
      <span class="nt">&lt;ProjectCollection&gt;</span>
         <span class="nt">&lt;ProjectTemplateLink</span> <span class="na">ProjectName=</span><span class="s">"$safeprojectname$.Api"</span> <span class="na">CopyParameters=</span><span class="s">"true"</span><span class="nt">&gt;</span>Template.Api\MyTemplate.vstemplate<span class="nt">&lt;/ProjectTemplateLink&gt;</span>
         <span class="nt">&lt;ProjectTemplateLink</span> <span class="na">ProjectName=</span><span class="s">"$safeprojectname$.Service"</span> <span class="na">CopyParameters=</span><span class="s">"true"</span><span class="nt">&gt;</span>Template.Service\MyTemplate.vstemplate<span class="nt">&lt;/ProjectTemplateLink&gt;</span>
         <span class="nt">&lt;ProjectTemplateLink</span> <span class="na">ProjectName=</span><span class="s">"$safeprojectname$.Data"</span> <span class="na">CopyParameters=</span><span class="s">"true"</span><span class="nt">&gt;</span>Template.Data\MyTemplate.vstemplate<span class="nt">&lt;/ProjectTemplateLink&gt;</span>
      <span class="nt">&lt;/ProjectCollection&gt;</span>
   <span class="nt">&lt;/TemplateContent&gt;</span>
<span class="nt">&lt;/VSTemplate&gt;</span>
</pre></table></code></div></div><p>Zip all files and copy the zip over the previously created zip in the Visual C# folder. Create a new project and select your template and enter Customer as project name. If you did everything right, all files and projects should be named correctly and the project should build without an error. It is very easy to have errors on the first try since you don’t have any help to find errors in the template and every typo will result in a build error.</p><div id="attachment_2296" style="width: 257px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/All-files-got-renamed-correctly.jpg"><img aria-describedby="caption-attachment-2296" loading="lazy" class="wp-image-2296 size-full" src="/assets/img/posts/2020/07/All-files-got-renamed-correctly.jpg" alt="All files got renamed correctly from the Visual Studio Template" width="247" height="339" /></a><p id="caption-attachment-2296" class="wp-caption-text"> All files got renamed correctly</p></div><p>When you don’t have any error, run the project and you should see Customer in the headline, description and Controller.</p><div id="attachment_2297" style="width: 372px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/Testing-the-created-solution.jpg"><img aria-describedby="caption-attachment-2297" loading="lazy" class="wp-image-2297 size-full" src="/assets/img/posts/2020/07/Testing-the-created-solution.jpg" alt="Testing the created solution from the Visual Studio Template" width="362" height="404" /></a><p id="caption-attachment-2297" class="wp-caption-text"> Testing the created solution</p></div><h2 id="add-docker-support-to-the-visual-studio-template">Add Docker Support to the Visual Studio Template</h2><p>Adding Docker support to your Visual Studio Template is very simple. Right-click on your Template.Api project and select Add –&gt; Docker Support. Select an operating system and click OK. This adds a Dockerfile and that’s it already.</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre>FROM mcr.microsoft.com/dotnet/core/aspnet:3.1-buster-slim AS base  
WORKDIR /app  
EXPOSE 80

FROM mcr.microsoft.com/dotnet/core/sdk:3.1-buster AS build  
WORKDIR /src  
COPY ["Template.Api/Template.Api.csproj", "Template.Api/"]  
COPY ["Template.Service/Template.Service.csproj", "Template.Service/"]  
COPY ["Template.Data/Template.Data.csproj", "Template.Data/"]  
RUN dotnet restore "Template.Api/Template.Api.csproj"  
COPY . .  
WORKDIR "/src/Template.Api"  
RUN dotnet build "Template.Api.csproj" -c Release -o /app/build

FROM build AS publish  
RUN dotnet publish "Template.Api.csproj" -c Release -o /app/publish

FROM base AS final  
WORKDIR /app  
COPY &amp;#8211;from=publish /app/publish .  
ENTRYPOINT ["dotnet", "Template.Api.dll"]  
</pre></table></code></div></div><h3 id="use-variables-in-the-dockerfile">Use Variables in the Dockerfile</h3><p>Since we use variables everywhere, we have to use variables also in the Dockerfile because otherwise the projects wouldn’t be found since their name will change when the solution is created. Replace every Template with $ext_safeprojectname$ in the Dockerfile. When you are done export the project again. This time you only have to export the Api project.</p><p>After adding the new template to Visual Studio, create a new project and you will see the Dockerfile in your solution.</p><div id="attachment_2298" style="width: 244px" class="wp-caption aligncenter"> <a href="/assets/img/posts/2020/07/The-Dockerfile-is-in-the-created-project.jpg"><img aria-describedby="caption-attachment-2298" loading="lazy" class="wp-image-2298 size-full" src="/assets/img/posts/2020/07/The-Dockerfile-is-in-the-created-project.jpg" alt="The Dockerfile is in the created project from the Visual Studio Template" width="234" height="354" /></a><p id="caption-attachment-2298" class="wp-caption-text"> The Dockerfile is in the created project</p></div><h2 id="conclusion">Conclusion</h2><p>Use a Visual Studio Template to set up solutions that have the same structure. Microservices often have the same skeleton and are a great candidate for this. Templates allow you to install all Nuget packages and also to add Test projects. Another advantage is that even junior developers or interns can set up new projects.</p><p>You can find the code for the template without variables <a href="https://github.com/WolfgangOfner/VisualStudioTemplate/tree/withoutVariables" target="_blank" rel="noopener noreferrer">here</a> and the template with variables <a href="https://github.com/WolfgangOfner/VisualStudioTemplate" target="_blank" rel="noopener noreferrer">here</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a>, <a href='/categories/miscellaneous/'>Miscellaneous</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/.net-core-3.1/" class="post-tag no-text-decoration" >.net core 3.1</a> <a href="/tags/c%23/" class="post-tag no-text-decoration" >C#</a> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a> <a href="/tags/visual-studio/" class="post-tag no-text-decoration" >Visual Studio</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Create a .NET Core Visual Studio Template - Programming With Wolfgang&url=/create-a-net-core-visual-studio-template/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Create a .NET Core Visual Studio Template - Programming With Wolfgang&u=/create-a-net-core-visual-studio-template/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Create a .NET Core Visual Studio Template - Programming With Wolfgang&url=/create-a-net-core-visual-studio-template/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=/create-a-net-core-visual-studio-template/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/run-tests-inside-docker-during-ci/">Run Tests inside Docker during CI</a><li><a href="/repository-pattern-net-core/">Repository Pattern in .Net Core</a><li><a href="/proxy-pattern-in-net-core/">Proxy Pattern in .NET Core</a></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/mediatr/">MediatR</a> <a class="post-tag" href="/tags/cqrs/">CQRS</a> <a class="post-tag" href="/tags/azure-devops/">Azure Devops</a> <a class="post-tag" href="/tags/docker-compose/">docker compose</a> <a class="post-tag" href="/tags/swagger/">Swagger</a> <a class="post-tag" href="/tags/scrum/">Scrum</a> <a class="post-tag" href="/tags/agile/">Agile</a> <a class="post-tag" href="/tags/xunit/">xUnit</a> <a class="post-tag" href="/tags/rabbitmq/">RabbitMQ</a> <a class="post-tag" href="/tags/mvc/">MVC</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/programming-microservices-net-core-3-1/"><div class="card-body"> <span class="timeago small" > Apr 13 <i class="unloaded">2020-04-13T17:53:40+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Programming a Microservice with .NET Core 3.1</h3><div class="text-muted small"><p> In my last post, I talked about the theory of a microservice. Today it is going to be more practical. I will create two microservices using ASP .NET Core 3.1. Over the next posts., I will extend th...</p></div></div></a></div><div class="card"> <a href="/document-your-microservice-with-swagger/"><div class="card-body"> <span class="timeago small" > Apr 15 <i class="unloaded">2020-04-15T17:37:49+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Document your Microservice with Swagger</h3><div class="text-muted small"><p> Swagger is an open-source toolset that can be easily integrated into your solution and which helps you to document and test your APIs. It is so simple that even none technical people can use it. In...</p></div></div></a></div><div class="card"> <a href="/cqrs-in-asp-net-core-3-1/"><div class="card-body"> <span class="timeago small" > Apr 16 <i class="unloaded">2020-04-16T13:03:24+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CQRS in ASP .NET Core 3.1</h3><div class="text-muted small"><p> CQRS stands for Command Query Responsibility Segregation and is used to use different models for read and for write operations. In this post, I will explain how I implemented CQRS in my microservic...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/creating-a-microservice-with-net-core-3-1/" class="btn btn-outline-primary"><p>Creating a Microservice with .NET Core 3.1</p></a> <a href="/create-net-core-in-ci-pipeline-in-azure-devops/" class="btn btn-outline-primary"><p>Create a .NET Core CI Pipeline in Azure DevOps</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2020 <a href="https://twitter.com/wolfgang_ofner">Wolfgang Ofner</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/mediatr/">MediatR</a> <a class="post-tag" href="/tags/cqrs/">CQRS</a> <a class="post-tag" href="/tags/azure-devops/">Azure Devops</a> <a class="post-tag" href="/tags/docker-compose/">docker compose</a> <a class="post-tag" href="/tags/swagger/">Swagger</a> <a class="post-tag" href="/tags/scrum/">Scrum</a> <a class="post-tag" href="/tags/agile/">Agile</a> <a class="post-tag" href="/tags/xunit/">xUnit</a> <a class="post-tag" href="/tags/rabbitmq/">RabbitMQ</a> <a class="post-tag" href="/tags/mvc/">MVC</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
